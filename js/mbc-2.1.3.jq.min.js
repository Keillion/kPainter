/**
 * Dynamsoft JavaScript Library
 * @product Dynamsoft Mobile Browser Capture
 * @website http://www.dynamsoft.com
 * @preserve Copyright 2018, Dynamsoft Corporation
 * @author Dynamsoft
 * @version 2.1.3
 * @fileoverview Dynamsoft JavaScript Library for Basic Image Edit
 * More info on MBC: http://www.dynamsoft.com/
 */
/*
 jQuery v3.2.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector | (c) JS Foundation and other contributors | jquery.org/license */
var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(h,a,f){if(f.get||f.set)throw new TypeError("ES3 does not support getters and setters.");h!=Array.prototype&&h!=Object.prototype&&(h[a]=f.value)};$jscomp.getGlobal=function(h){return"undefined"!=typeof window&&window===h?h:"undefined"!=typeof global&&null!=global?global:h};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(h){return $jscomp.SYMBOL_PREFIX+(h||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var h=$jscomp.global.Symbol.iterator;h||(h=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[h]&&$jscomp.defineProperty(Array.prototype,h,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(h){var a=0;return $jscomp.iteratorPrototype(function(){return a<h.length?{done:!1,value:h[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(h){$jscomp.initSymbolIterator();h={next:h};h[$jscomp.global.Symbol.iterator]=function(){return this};return h};$jscomp.findInternal=function(h,a,f){h instanceof String&&(h=String(h));for(var t=h.length,D=0;D<t;D++){var aa=h[D];if(a.call(f,aa,D,h))return{i:D,v:aa}}return{i:-1,v:void 0}};
$jscomp.polyfill=function(h,a,f,t){if(a){f=$jscomp.global;h=h.split(".");for(t=0;t<h.length-1;t++){var D=h[t];D in f||(f[D]={});f=f[D]}h=h[h.length-1];t=f[h];a=a(t);a!=t&&null!=a&&$jscomp.defineProperty(f,h,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.find",function(h){return h?h:function(a,f){return $jscomp.findInternal(this,a,f).v}},"es6-impl","es3");$jscomp.makeIterator=function(h){$jscomp.initSymbolIterator();var a=h[Symbol.iterator];return a?a.call(h):$jscomp.arrayIterator(h)};
$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(h){function a(){this.batch_=null}if(h&&!$jscomp.FORCE_POLYFILL_PROMISE)return h;a.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};a.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var f=$jscomp.global.setTimeout;a.prototype.asyncExecuteFunction=function(a){f(a,0)};a.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var f=0;f<a.length;++f){var h=a[f];delete a[f];try{h()}catch(A){this.asyncThrow_(A)}}}this.batch_=null};a.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var t=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var f=this.createResolveAndReject_();try{a(f.resolve,f.reject)}catch(ja){f.reject(ja)}};t.prototype.createResolveAndReject_=function(){function a(a){return function(m){h||(h=!0,a.call(f,m))}}var f=this,
h=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};t.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof t)this.settleSameAsPromise_(a);else{var f;a:switch(typeof a){case "object":f=null!=a;break a;case "function":f=!0;break a;default:f=!1}f?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};t.prototype.resolveToNonPromiseObj_=function(a){var f=void 0;try{f=a.then}catch(ja){this.reject_(ja);return}"function"==
typeof f?this.settleSameAsThenable_(f,a):this.fulfill_(a)};t.prototype.reject_=function(a){this.settle_(2,a)};t.prototype.fulfill_=function(a){this.settle_(1,a)};t.prototype.settle_=function(a,f){if(0!=this.state_)throw Error("Cannot settle("+a+", "+f|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=f;this.executeOnSettledCallbacks_()};t.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=this.onSettledCallbacks_,f=0;f<a.length;++f)a[f].call(),
a[f]=null;this.onSettledCallbacks_=null}};var D=new a;t.prototype.settleSameAsPromise_=function(a){var f=this.createResolveAndReject_();a.callWhenSettled_(f.resolve,f.reject)};t.prototype.settleSameAsThenable_=function(a,f){var h=this.createResolveAndReject_();try{a.call(f,h.resolve,h.reject)}catch(A){h.reject(A)}};t.prototype.then=function(a,f){function h(a,f){return"function"==typeof a?function(f){try{A(a(f))}catch(K){m(K)}}:f}var A,m,y=new t(function(a,f){A=a;m=f});this.callWhenSettled_(h(a,A),
h(f,m));return y};t.prototype["catch"]=function(a){return this.then(void 0,a)};t.prototype.callWhenSettled_=function(a,f){function h(){switch(t.state_){case 1:a(t.result_);break;case 2:f(t.result_);break;default:throw Error("Unexpected state: "+t.state_);}}var t=this;null==this.onSettledCallbacks_?D.asyncExecute(h):this.onSettledCallbacks_.push(function(){D.asyncExecute(h)})};t.resolve=function(a){return a instanceof t?a:new t(function(f,h){f(a)})};t.reject=function(a){return new t(function(f,h){h(a)})};
t.race=function(a){return new t(function(f,h){for(var A=$jscomp.makeIterator(a),m=A.next();!m.done;m=A.next())t.resolve(m.value).callWhenSettled_(f,h)})};t.all=function(a){var f=$jscomp.makeIterator(a),h=f.next();return h.done?t.resolve([]):new t(function(a,m){function y(f){return function(h){r[f]=h;A--;0==A&&a(r)}}var r=[],A=0;do r.push(void 0),A++,t.resolve(h.value).callWhenSettled_(y(r.length-1),m),h=f.next();while(!h.done)})};$jscomp.EXPOSE_ASYNC_EXECUTOR&&(t.$jscomp$new$AsyncExecutor=function(){return new a});
return t},"es6-impl","es3");$jscomp.polyfill("Math.sign",function(h){return h?h:function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.fill",function(h){return h?h:function(a,f,h){var t=this.length||0;0>f&&(f=Math.max(0,t+f));if(null==h||h>t)h=t;h=Number(h);0>h&&(h=Math.max(0,t+h));for(f=Number(f||0);f<h;f++)this[f]=a;return this}},"es6-impl","es3");
!function(h,a){"object"==typeof module&&"object"==typeof module.exports?module.exports=h.document?a(h,!0):function(f){if(!f.document)throw Error("jQuery requires a window with a document");return a(f)}:a(h)}("undefined"!=typeof window?window:this,function(h,a){function f(b,c){c=c||g;var d=c.createElement("script");d.text=b;c.head.appendChild(d).parentNode.removeChild(d)}function t(b){var c=!!b&&"length"in b&&b.length,q=d.type(b);return"function"!==q&&!d.isWindow(b)&&("array"===q||0===c||"number"==
typeof c&&0<c&&c-1 in b)}function D(b,c){return b.nodeName&&b.nodeName.toLowerCase()===c.toLowerCase()}function aa(b,c,q){return d.isFunction(c)?d.grep(b,function(b,d){return!!c.call(b,d,b)!==q}):c.nodeType?d.grep(b,function(b){return b===c!==q}):"string"!=typeof c?d.grep(b,function(b){return-1<l.call(c,b)!==q}):$a.test(c)?d.filter(c,b,q):(c=d.filter(c,b),d.grep(b,function(b){return-1<l.call(c,b)!==q&&1===b.nodeType}))}function N(b,c){for(;(b=b[c])&&1!==b.nodeType;);return b}function ja(b){var c=
{};return d.each(b.match(pa)||[],function(b,d){c[d]=!0}),c}function A(b){return b}function m(b){throw b;}function y(b,c,q,a){var u;try{b&&d.isFunction(u=b.promise)?u.call(b).done(c).fail(q):b&&d.isFunction(u=b.then)?u.call(b,c,q):c.apply(void 0,[b].slice(a))}catch(V){q.apply(void 0,[V])}}function r(){g.removeEventListener("DOMContentLoaded",r);h.removeEventListener("load",r);d.ready()}function J(){this.expando=d.expando+J.uid++}function F(b,c,d){var q;if(void 0===d&&1===b.nodeType)if(q="data-"+c.replace(ab,
"-$&").toLowerCase(),d=b.getAttribute(q),"string"==typeof d){try{q=d,d="true"===q||"false"!==q&&("null"===q?null:q===+q+""?+q:bb.test(q)?JSON.parse(q):q)}catch(I){}fa.set(b,c,d)}else d=void 0;return d}function K(b,c,q,a){var u,e=1,g=20,n=a?function(){return a.cur()}:function(){return d.css(b,c,"")},k=n(),f=q&&q[3]||(d.cssNumber[c]?"":"px"),l=(d.cssNumber[c]||"px"!==f&&+k)&&va.exec(d.css(b,c));if(l&&l[3]!==f){f=f||l[3];q=q||[];l=+k||1;do e=e||".5",l/=e,d.style(b,c,l+f);while(e!==(e=n()/k)&&1!==e&&
--g)}return q&&(l=+l||+k||0,u=q[1]?l+(q[1]+1)*q[2]:+q[2],a&&(a.unit=f,a.start=l,a.end=u)),u}function Z(b,c){for(var q,a,e=[],g=0,n=b.length;g<n;g++)if(a=b[g],a.style)if(q=a.style.display,c){if("none"===q&&(e[g]=Q.get(a,"display")||null,e[g]||(a.style.display="")),""===a.style.display&&Ia(a)){q=g;var k,f=void 0;k=a.ownerDocument;var l=a.nodeName;k=(a=Ja[l])?a:(f=k.body.appendChild(k.createElement(l)),a=d.css(f,"display"),f.parentNode.removeChild(f),"none"===a&&(a="block"),Ja[l]=a,a);e[q]=k}}else"none"!==
q&&(e[g]="none",Q.set(a,"display",q));for(g=0;g<n;g++)null!=e[g]&&(b[g].style.display=e[g]);return b}function w(b,c){var q;return q="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(c||"*"):"undefined"!=typeof b.querySelectorAll?b.querySelectorAll(c||"*"):[],void 0===c||c&&D(b,c)?d.merge([b],q):q}function G(b,c){for(var d=0,a=b.length;d<a;d++)Q.set(b[d],"globalEval",!c||Q.get(c[d],"globalEval"))}function U(b,c,q,a,e){for(var u,g,I,n,k=c.createDocumentFragment(),f=[],l=0,h=b.length;l<
h;l++)if(u=b[l],u||0===u)if("object"===d.type(u))d.merge(f,u.nodeType?[u]:u);else if(db.test(u)){g=g||k.appendChild(c.createElement("div"));I=(Ka.exec(u)||["",""])[1].toLowerCase();I=ea[I]||ea._default;g.innerHTML=I[1]+d.htmlPrefilter(u)+I[2];for(I=I[0];I--;)g=g.lastChild;d.merge(f,g.childNodes);g=k.firstChild;g.textContent=""}else f.push(c.createTextNode(u));k.textContent="";for(l=0;u=f[l++];)if(a&&-1<d.inArray(u,a))e&&e.push(u);else if(n=d.contains(u.ownerDocument,u),g=w(k.appendChild(u),"script"),
n&&G(g),q)for(I=0;u=g[I++];)La.test(u.type||"")&&q.push(u);return k}function T(){return!0}function H(){return!1}function p(){try{return g.activeElement}catch(b){}}function ka(b,c,q,a,e,g){var u,I;if("object"==typeof c){"string"!=typeof q&&(a=a||q,q=void 0);for(I in c)ka(b,I,q,a,c[I],g);return b}if(null==a&&null==e?(e=q,a=q=void 0):null==e&&("string"==typeof q?(e=a,a=void 0):(e=a,a=q,q=void 0)),!1===e)e=H;else if(!e)return b;return 1===g&&(u=e,e=function(b){return d().off(b),u.apply(this,arguments)},
e.guid=u.guid||(u.guid=d.guid++)),b.each(function(){d.event.add(this,c,e,a,q)})}function B(b,c){return D(b,"table")&&D(11!==c.nodeType?c:c.firstChild,"tr")?d(">tbody",b)[0]||b:b}function E(b){return b.type=(null!==b.getAttribute("type"))+"/"+b.type,b}function C(b){var c=eb.exec(b.type);return c?b.type=c[1]:b.removeAttribute("type"),b}function Aa(b,c){var q,a,e,g,n,k;if(1===c.nodeType){if(Q.hasData(b)&&(q=Q.access(b),a=Q.set(c,q),k=q.events))for(e in delete a.handle,a.events={},k)for(q=0,a=k[e].length;q<
a;q++)d.event.add(c,e,k[e][q]);fa.hasData(b)&&(g=fa.access(b),n=d.extend({},g),fa.set(c,n))}}function ba(b,c,q,a){c=n.apply([],c);var e,u,g,k,l=0,h=b.length,v=h-1,B=c[0],z=d.isFunction(B);if(z||1<h&&"string"==typeof B&&!S.checkClone&&fb.test(B))return b.each(function(d){var e=b.eq(d);z&&(c[0]=B.call(this,d,e.html()));ba(e,c,q,a)});if(h&&(e=U(c,b[0].ownerDocument,!1,b,a),u=e.firstChild,1===e.childNodes.length&&(e=u),u||a)){u=d.map(w(e,"script"),E);for(g=u.length;l<h;l++)k=e,l!==v&&(k=d.clone(k,!0,
!0),g&&d.merge(u,w(k,"script"))),q.call(b[l],k,l);if(g)for(e=u[u.length-1].ownerDocument,d.map(u,C),l=0;l<g;l++)k=u[l],La.test(k.type||"")&&!Q.access(k,"globalEval")&&d.contains(e,k)&&(k.src?d._evalUrl&&d._evalUrl(k.src):f(k.textContent.replace(gb,""),e))}return b}function R(b,c,q){for(var a=c?d.filter(c,b):b,e=0;null!=(c=a[e]);e++)q||1!==c.nodeType||d.cleanData(w(c)),c.parentNode&&(q&&d.contains(c.ownerDocument,c)&&G(w(c,"script")),c.parentNode.removeChild(c));return b}function ga(b,c,q){var a,e,
g,k,n=b.style;return q=q||ya(b),q&&(k=q.getPropertyValue(c)||q[c],""!==k||d.contains(b.ownerDocument,b)||(k=d.style(b,c)),!S.pixelMarginRight()&&Ea.test(k)&&Ma.test(c)&&(a=n.width,e=n.minWidth,g=n.maxWidth,n.minWidth=n.maxWidth=n.width=k,k=q.width,n.width=a,n.minWidth=e,n.maxWidth=g)),void 0!==k?k+"":k}function ha(b,c){return{get:function(){return b()?void delete this.get:(this.get=c).apply(this,arguments)}}}function ca(b){var c=d.cssProps[b];if(!c){var c=d.cssProps,q;a:if(q=b,!(q in Na)){for(var a=
q[0].toUpperCase()+q.slice(1),e=Oa.length;e--;)if(q=Oa[e]+a,q in Na)break a;q=void 0}c=c[b]=q||b}return c}function oa(b,c,d){return(b=va.exec(c))?Math.max(0,b[2]-(d||0))+(b[3]||"px"):c}function X(b,c,q,a,e){var u=0;for(c=q===(a?"border":"content")?4:"width"===c?1:0;4>c;c+=2)"margin"===q&&(u+=d.css(b,q+qa[c],!0,e)),a?("content"===q&&(u-=d.css(b,"padding"+qa[c],!0,e)),"margin"!==q&&(u-=d.css(b,"border"+qa[c]+"Width",!0,e))):(u+=d.css(b,"padding"+qa[c],!0,e),"padding"!==q&&(u+=d.css(b,"border"+qa[c]+
"Width",!0,e)));return u}function Y(b,c,q){var a,e=ya(b),g=ga(b,c,e),k="border-box"===d.css(b,"boxSizing",!1,e);return Ea.test(g)?g:(a=k&&(S.boxSizingReliable()||g===b.style[c]),"auto"===g&&(g=b["offset"+c[0].toUpperCase()+c.slice(1)]),g=parseFloat(g)||0,g+X(b,c,q||(k?"border":"content"),a,e)+"px")}function O(b){return(b.match(pa)||[]).join(" ")}function P(b){return b.getAttribute&&b.getAttribute("class")||""}function M(b,c,q,a){var e;if(Array.isArray(c))d.each(c,function(c,d){q||hb.test(b)?a(b,d):
M(b+"["+("object"==typeof d&&null!=d?c:"")+"]",d,q,a)});else if(q||"object"!==d.type(c))a(b,c);else for(e in c)M(b+"["+e+"]",c[e],q,a)}var x=[],g=h.document,e=Object.getPrototypeOf,k=x.slice,n=x.concat,v=x.push,l=x.indexOf,z={},ia=z.toString,la=z.hasOwnProperty,L=la.toString,ma=L.call(Object),S={},d=function(b,c){return new d.fn.init(b,c)},sa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Ba=/^-ms-/,Fa=/-([a-z])/g,Ga=function(b,c){return c.toUpperCase()};$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();
$jscomp.initSymbol();$jscomp.initSymbolIterator();d.fn=d.prototype={jquery:"3.2.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector",constructor:d,length:0,toArray:function(){return k.call(this)},get:function(b){return null==b?k.call(this):0>b?this[b+this.length]:this[b]},pushStack:function(b){b=d.merge(this.constructor(),b);return b.prevObject=
this,b},each:function(b){return d.each(this,b)},map:function(b){return this.pushStack(d.map(this,function(c,d){return b.call(c,d,c)}))},slice:function(){return this.pushStack(k.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b){var c=this.length;b=+b+(0>b?c:0);return this.pushStack(0<=b&&b<c?[this[b]]:[])},end:function(){return this.prevObject||this.constructor()},push:v,sort:x.sort,splice:x.splice};d.extend=d.fn.extend=function(){var b,
c,q,a,e,g,k=arguments[0]||{},n=1,f=arguments.length,l=!1;"boolean"==typeof k&&(l=k,k=arguments[n]||{},n++);"object"==typeof k||d.isFunction(k)||(k={});for(n===f&&(k=this,n--);n<f;n++)if(null!=(b=arguments[n]))for(c in b)q=k[c],a=b[c],k!==a&&(l&&a&&(d.isPlainObject(a)||(e=Array.isArray(a)))?(e?(e=!1,g=q&&Array.isArray(q)?q:[]):g=q&&d.isPlainObject(q)?q:{},k[c]=d.extend(l,g,a)):void 0!==a&&(k[c]=a));return k};d.extend({expando:"jQuery"+("3.2.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseXML,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-effects,-effects/Tween,-effects/animatedSelector"+
Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw Error(b);},noop:function(){},isFunction:function(b){return"function"===d.type(b)},isWindow:function(b){return null!=b&&b===b.window},isNumeric:function(b){var c=d.type(b);return("number"===c||"string"===c)&&!isNaN(b-parseFloat(b))},isPlainObject:function(b){var c,d;return!(!b||"[object Object]"!==ia.call(b))&&(!(c=e(b))||(d=la.call(c,"constructor")&&c.constructor,"function"==typeof d&&L.call(d)===ma))},isEmptyObject:function(b){for(var c in b)return!1;
return!0},type:function(b){return null==b?b+"":"object"==typeof b||"function"==typeof b?z[ia.call(b)]||"object":typeof b},globalEval:function(b){f(b)},camelCase:function(b){return b.replace(Ba,"ms-").replace(Fa,Ga)},each:function(b,c){var d,a=0;if(t(b))for(d=b.length;a<d&&!1!==c.call(b[a],a,b[a]);a++);else for(a in b)if(!1===c.call(b[a],a,b[a]))break;return b},trim:function(b){return null==b?"":(b+"").replace(sa,"")},makeArray:function(b,c){var q=c||[];return null!=b&&(t(Object(b))?d.merge(q,"string"==
typeof b?[b]:b):v.call(q,b)),q},inArray:function(b,c,d){return null==c?-1:l.call(c,b,d)},merge:function(b,c){for(var d=+c.length,a=0,e=b.length;a<d;a++)b[e++]=c[a];return b.length=e,b},grep:function(b,c,d){for(var a=[],q=0,e=b.length,g=!d;q<e;q++)d=!c(b[q],q),d!==g&&a.push(b[q]);return a},map:function(b,c,d){var a,q,e=0,g=[];if(t(b))for(a=b.length;e<a;e++)q=c(b[e],e,d),null!=q&&g.push(q);else for(e in b)q=c(b[e],e,d),null!=q&&g.push(q);return n.apply([],g)},guid:1,proxy:function(b,c){var a,e,g;if("string"==
typeof c&&(a=b[c],c=b,b=a),d.isFunction(b))return e=k.call(arguments,2),g=function(){return b.apply(c||this,e.concat(k.call(arguments)))},g.guid=b.guid=b.guid||d.guid++,g},now:Date.now,support:S});"function"==typeof Symbol&&(d.fn[Symbol.iterator]=x[Symbol.iterator]);d.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(b,c){z["[object "+c+"]"]=c.toLowerCase()});var na=function(b){function c(b,c,d,a){var q,e,g,u,k,W=c&&c.ownerDocument,n=c?c.nodeType:9;if(d=
d||[],"string"!=typeof b||!b||1!==n&&9!==n&&11!==n)return d;if(!a&&((c?c.ownerDocument||c:T)!==p&&r(c),c=c||p,H)){if(11!==n&&(u=pa.exec(b)))if(q=u[1])if(9===n){if(!(e=c.getElementById(q)))return d;if(e.id===q)return d.push(e),d}else{if(W&&(e=W.getElementById(q))&&ka(c,e)&&e.id===q)return d.push(e),d}else{if(u[2])return Q.apply(d,c.getElementsByTagName(b)),d;if((q=u[3])&&m.getElementsByClassName&&c.getElementsByClassName)return Q.apply(d,c.getElementsByClassName(q)),d}if(!(!m.qsa||D[b+" "]||y&&y.test(b))){if(1!==
n)W=c,k=b;else if("object"!==c.nodeName.toLowerCase()){(g=c.getAttribute("id"))?g=g.replace(qa,ua):c.setAttribute("id",g=R);e=ma(b);for(q=e.length;q--;)e[q]="#"+g+" "+z(e[q]);k=e.join(",");W=za.test(b)&&v(c.parentNode)||c}if(k)try{return Q.apply(d,W.querySelectorAll(k)),d}catch(Bb){}finally{g===R&&c.removeAttribute("id")}}}return Ba(b.replace(xa,"$1"),c,d,a)}function d(){function b(d,a){return c.push(d+" ")>L.cacheLength&&delete b[c.shift()],b[d+" "]=a}var c=[];return b}function a(b){return b[R]=
!0,b}function e(b){var c=p.createElement("fieldset");try{return!!b(c)}catch(zb){return!1}finally{c.parentNode&&c.parentNode.removeChild(c)}}function g(b,c){for(var d=b.split("|"),a=d.length;a--;)L.attrHandle[d[a]]=c}function k(b,c){var d=c&&b,a=d&&1===b.nodeType&&1===c.nodeType&&b.sourceIndex-c.sourceIndex;if(a)return a;if(d)for(;d=d.nextSibling;)if(d===c)return-1;return b?1:-1}function n(b){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===b}}function f(b){return function(c){var d=
c.nodeName.toLowerCase();return("input"===d||"button"===d)&&c.type===b}}function l(b){return function(c){return"form"in c?c.parentNode&&!1===c.disabled?"label"in c?"label"in c.parentNode?c.parentNode.disabled===b:c.disabled===b:c.isDisabled===b||c.isDisabled!==!b&&ya(c)===b:c.disabled===b:"label"in c&&c.disabled===b}}function h(b){return a(function(c){return c=+c,a(function(d,a){for(var q,e=b([],d.length,c),g=e.length;g--;)d[q=e[g]]&&(d[q]=!(a[q]=d[q]))})})}function v(b){return b&&"undefined"!=typeof b.getElementsByTagName&&
b}function B(){}function z(b){for(var c=0,d=b.length,a="";c<d;c++)a+=b[c].value;return a}function E(b,c,d){var a=c.dir,q=c.next,e=q||a,g=d&&"parentNode"===e,u=J++;return c.first?function(c,d,q){for(;c=c[a];)if(1===c.nodeType||g)return b(c,d,q);return!1}:function(c,d,k){var n,W,I,f=[F,u];if(k)for(;c=c[a];){if((1===c.nodeType||g)&&b(c,d,k))return!0}else for(;c=c[a];)if(1===c.nodeType||g)if(I=c[R]||(c[R]={}),W=I[c.uniqueID]||(I[c.uniqueID]={}),q&&q===c.nodeName.toLowerCase())c=c[a]||c;else{if((n=W[e])&&
n[0]===F&&n[1]===u)return f[2]=n[2];if(W[e]=f,f[2]=b(c,d,k))return!0}return!1}}function S(b){return 1<b.length?function(c,d,a){for(var q=b.length;q--;)if(!b[q](c,d,a))return!1;return!0}:b[0]}function ia(b,c,d,a,q){for(var e,g=[],u=0,k=b.length,n=null!=c;u<k;u++)(e=b[u])&&(d&&!d(e,a,q)||(g.push(e),n&&c.push(u)));return g}function M(b,d,q,e,g,u){return e&&!e[R]&&(e=M(e)),g&&!g[R]&&(g=M(g,u)),a(function(a,u,k,n){var W,I,f=[],l=[],h=u.length,v;if(!(v=a)){v=d||"*";for(var V=k.nodeType?[k]:k,B=[],z=0,E=
V.length;z<E;z++)c(v,V[z],B);v=B}v=!b||!a&&d?v:ia(v,f,b,k,n);V=q?g||(a?b:h||e)?[]:u:v;if(q&&q(v,V,k,n),e)for(W=ia(V,l),e(W,[],k,n),k=W.length;k--;)(I=W[k])&&(V[l[k]]=!(v[l[k]]=I));if(a){if(g||b){if(g){W=[];for(k=V.length;k--;)(I=V[k])&&W.push(v[k]=I);g(null,V=[],W,n)}for(k=V.length;k--;)(I=V[k])&&-1<(W=g?na(a,I):f[k])&&(a[W]=!(u[W]=I))}}else V=ia(V===u?V.splice(h,V.length):V),g?g(null,u,V,n):Q.apply(u,V)})}function x(b){var c,d,a,q=b.length,e=L.relative[b[0].type];d=e||L.relative[" "];for(var g=e?
1:0,k=E(function(b){return b===c},d,!0),u=E(function(b){return-1<na(c,b)},d,!0),n=[function(b,d,a){b=!e&&(a||d!==G)||((c=d).nodeType?k(b,d,a):u(b,d,a));return c=null,b}];g<q;g++)if(d=L.relative[b[g].type])n=[E(S(n),d)];else{if(d=L.filter[b[g].type].apply(null,b[g].matches),d[R]){for(a=++g;a<q&&!L.relative[b[a].type];a++);return M(1<g&&S(n),1<g&&z(b.slice(0,g-1).concat({value:" "===b[g-2].type?"*":""})).replace(xa,"$1"),d,g<a&&x(b.slice(g,a)),a<q&&x(b=b.slice(a)),a<q&&z(b))}n.push(d)}return S(n)}function C(b,
d){var q=0<d.length,e=0<b.length,g=function(a,g,k,u,n){var W,I,f,l=0,h="0",V=a&&[],v=[],B=G,z=a||e&&L.find.TAG("*",n),E=F+=null==B?1:Math.random()||.1,S=z.length;for(n&&(G=g===p||g||n);h!==S&&null!=(W=z[h]);h++){if(e&&W){I=0;for(g||W.ownerDocument===p||(r(W),k=!H);f=b[I++];)if(f(W,g||p,k)){u.push(W);break}n&&(F=E)}q&&((W=!f&&W)&&l--,a&&V.push(W))}if(l+=h,q&&h!==l){for(I=0;f=d[I++];)f(V,v,g,k);if(a){if(0<l)for(;h--;)V[h]||v[h]||(v[h]=ca.call(u));v=ia(v)}Q.apply(u,v);n&&!a&&0<v.length&&1<l+d.length&&
c.uniqueSort(u)}return n&&(F=E,G=B),V};return q?a(g):g}var w,m,L,t,Aa,ma,la,Ba,G,ba,sa,r,p,U,H,y,A,ga,ka,R="sizzle"+1*new Date,T=b.document,F=0,J=0,K=d(),ha=d(),D=d(),P=function(b,c){return b===c&&(sa=!0),0},Fa={}.hasOwnProperty,O=[],ca=O.pop,N=O.push,Q=O.push,oa=O.slice,na=function(b,c){for(var d=0,a=b.length;d<a;d++)if(b[d]===c)return d;return-1},X=RegExp("[\\x20\\t\\r\\n\\f]+","g"),xa=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),Y=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,
Ga=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ta=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),Z=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,aa=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,wa={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,
CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},fa=/^(?:input|select|textarea|button)$/i,ja=/^h\d$/i,ea=
/^[^{]+\{\s*\[native \w/,pa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,za=/[+~]/,da=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),ra=function(b,c,d){b="0x"+c-65536;return b!==b||d?c:0>b?String.fromCharCode(b+65536):String.fromCharCode(b>>10|55296,1023&b|56320)},qa=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ua=function(b,c){return c?"\x00"===b?"\ufffd":b.slice(0,-1)+"\\"+b.charCodeAt(b.length-1).toString(16)+" ":"\\"+b},va=function(){r()},ya=E(function(b){return!0===
b.disabled&&("form"in b||"label"in b)},{dir:"parentNode",next:"legend"});try{Q.apply(O=oa.call(T.childNodes),T.childNodes),O[T.childNodes.length].nodeType}catch(W){Q={apply:O.length?function(b,c){N.apply(b,oa.call(c))}:function(b,c){for(var d=b.length,a=0;b[d++]=c[a++];);b.length=d-1}}}m=c.support={};Aa=c.isXML=function(b){b=b&&(b.ownerDocument||b).documentElement;return!!b&&"HTML"!==b.nodeName};r=c.setDocument=function(b){var c,d;b=b?b.ownerDocument||b:T;return b!==p&&9===b.nodeType&&b.documentElement?
(p=b,U=p.documentElement,H=!Aa(p),T!==p&&(d=p.defaultView)&&d.top!==d&&(d.addEventListener?d.addEventListener("unload",va,!1):d.attachEvent&&d.attachEvent("onunload",va)),m.attributes=e(function(b){return b.className="i",!b.getAttribute("className")}),m.getElementsByTagName=e(function(b){return b.appendChild(p.createComment("")),!b.getElementsByTagName("*").length}),m.getElementsByClassName=ea.test(p.getElementsByClassName),m.getById=e(function(b){return U.appendChild(b).id=R,!p.getElementsByName||
!p.getElementsByName(R).length}),m.getById?(L.filter.ID=function(b){var c=b.replace(da,ra);return function(b){return b.getAttribute("id")===c}},L.find.ID=function(b,c){if("undefined"!=typeof c.getElementById&&H){var d=c.getElementById(b);return d?[d]:[]}}):(L.filter.ID=function(b){var c=b.replace(da,ra);return function(b){return(b="undefined"!=typeof b.getAttributeNode&&b.getAttributeNode("id"))&&b.value===c}},L.find.ID=function(b,c){if("undefined"!=typeof c.getElementById&&H){var d,a,q,e=c.getElementById(b);
if(e){if(d=e.getAttributeNode("id"),d&&d.value===b)return[e];q=c.getElementsByName(b);for(a=0;e=q[a++];)if(d=e.getAttributeNode("id"),d&&d.value===b)return[e]}return[]}}),L.find.TAG=m.getElementsByTagName?function(b,c){return"undefined"!=typeof c.getElementsByTagName?c.getElementsByTagName(b):m.qsa?c.querySelectorAll(b):void 0}:function(b,c){var d,a=[],q=0,e=c.getElementsByTagName(b);if("*"===b){for(;d=e[q++];)1===d.nodeType&&a.push(d);return a}return e},L.find.CLASS=m.getElementsByClassName&&function(b,
c){if("undefined"!=typeof c.getElementsByClassName&&H)return c.getElementsByClassName(b)},A=[],y=[],(m.qsa=ea.test(p.querySelectorAll))&&(e(function(b){U.appendChild(b).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>";b.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");b.querySelectorAll("[selected]").length||y.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
b.querySelectorAll("[id~="+R+"-]").length||y.push("~=");b.querySelectorAll(":checked").length||y.push(":checked");b.querySelectorAll("a#"+R+"+*").length||y.push(".#.+[+~]")}),e(function(b){b.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var c=p.createElement("input");c.setAttribute("type","hidden");b.appendChild(c).setAttribute("name","D");b.querySelectorAll("[name=d]").length&&y.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==b.querySelectorAll(":enabled").length&&
y.push(":enabled",":disabled");U.appendChild(b).disabled=!0;2!==b.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled");b.querySelectorAll("*,:x");y.push(",.*:")})),(m.matchesSelector=ea.test(ga=U.matches||U.webkitMatchesSelector||U.mozMatchesSelector||U.oMatchesSelector||U.msMatchesSelector))&&e(function(b){m.disconnectedMatch=ga.call(b,"*");ga.call(b,"[s!='']:x");A.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
y=y.length&&new RegExp(y.join("|")),A=A.length&&new RegExp(A.join("|")),c=ea.test(U.compareDocumentPosition),ka=c||ea.test(U.contains)?function(b,c){var d=9===b.nodeType?b.documentElement:b,a=c&&c.parentNode;return b===a||!(!a||1!==a.nodeType||!(d.contains?d.contains(a):b.compareDocumentPosition&&16&b.compareDocumentPosition(a)))}:function(b,c){if(c)for(;c=c.parentNode;)if(c===b)return!0;return!1},P=c?function(b,c){if(b===c)return sa=!0,0;var d=!b.compareDocumentPosition-!c.compareDocumentPosition;
return d?d:(d=(b.ownerDocument||b)===(c.ownerDocument||c)?b.compareDocumentPosition(c):1,1&d||!m.sortDetached&&c.compareDocumentPosition(b)===d?b===p||b.ownerDocument===T&&ka(T,b)?-1:c===p||c.ownerDocument===T&&ka(T,c)?1:ba?na(ba,b)-na(ba,c):0:4&d?-1:1)}:function(b,c){if(b===c)return sa=!0,0;var d,a=0;d=b.parentNode;var q=c.parentNode,e=[b],g=[c];if(!d||!q)return b===p?-1:c===p?1:d?-1:q?1:ba?na(ba,b)-na(ba,c):0;if(d===q)return k(b,c);for(d=b;d=d.parentNode;)e.unshift(d);for(d=c;d=d.parentNode;)g.unshift(d);
for(;e[a]===g[a];)a++;return a?k(e[a],g[a]):e[a]===T?-1:g[a]===T?1:0},p):p};c.matches=function(b,d){return c(b,null,null,d)};c.matchesSelector=function(b,d){if((b.ownerDocument||b)!==p&&r(b),d=d.replace(ta,"='$1']"),!(!m.matchesSelector||!H||D[d+" "]||A&&A.test(d)||y&&y.test(d)))try{var a=ga.call(b,d);if(a||m.disconnectedMatch||b.document&&11!==b.document.nodeType)return a}catch(Ab){}return 0<c(d,p,null,[b]).length};c.contains=function(b,c){return(b.ownerDocument||b)!==p&&r(b),ka(b,c)};c.attr=function(b,
c){(b.ownerDocument||b)!==p&&r(b);var d=L.attrHandle[c.toLowerCase()],d=d&&Fa.call(L.attrHandle,c.toLowerCase())?d(b,c,!H):void 0;return void 0!==d?d:m.attributes||!H?b.getAttribute(c):(d=b.getAttributeNode(c))&&d.specified?d.value:null};c.escape=function(b){return(b+"").replace(qa,ua)};c.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);};c.uniqueSort=function(b){var c,d=[],a=0,q=0;if(sa=!m.detectDuplicates,ba=!m.sortStable&&b.slice(0),b.sort(P),sa){for(;c=b[q++];)c===b[q]&&
(a=d.push(q));for(;a--;)b.splice(d[a],1)}return ba=null,b};t=c.getText=function(b){var c,d="",a=0;if(c=b.nodeType)if(1===c||9===c||11===c){if("string"==typeof b.textContent)return b.textContent;for(b=b.firstChild;b;b=b.nextSibling)d+=t(b)}else{if(3===c||4===c)return b.nodeValue}else for(;c=b[a++];)d+=t(c);return d};L=c.selectors={cacheLength:50,createPseudo:a,match:wa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},
preFilter:{ATTR:function(b){return b[1]=b[1].replace(da,ra),b[3]=(b[3]||b[4]||b[5]||"").replace(da,ra),"~="===b[2]&&(b[3]=" "+b[3]+" "),b.slice(0,4)},CHILD:function(b){return b[1]=b[1].toLowerCase(),"nth"===b[1].slice(0,3)?(b[3]||c.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*("even"===b[3]||"odd"===b[3])),b[5]=+(b[7]+b[8]||"odd"===b[3])):b[3]&&c.error(b[0]),b},PSEUDO:function(b){var c,d=!b[6]&&b[2];return wa.CHILD.test(b[0])?null:(b[3]?b[2]=b[4]||b[5]||"":d&&Z.test(d)&&(c=ma(d,!0))&&(c=d.indexOf(")",
d.length-c)-d.length)&&(b[0]=b[0].slice(0,c),b[2]=d.slice(0,c)),b.slice(0,3))}},filter:{TAG:function(b){var c=b.replace(da,ra).toLowerCase();return"*"===b?function(){return!0}:function(b){return b.nodeName&&b.nodeName.toLowerCase()===c}},CLASS:function(b){var c=K[b+" "];return c||(c=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+b+"([\\x20\\t\\r\\n\\f]|$)"),K(b,function(b){return c.test("string"==typeof b.className&&b.className||"undefined"!=typeof b.getAttribute&&b.getAttribute("class")||"")}))},ATTR:function(b,
d,a){return function(q){q=c.attr(q,b);return null==q?"!="===d:!d||(q+="","="===d?q===a:"!="===d?q!==a:"^="===d?a&&0===q.indexOf(a):"*="===d?a&&-1<q.indexOf(a):"$="===d?a&&q.slice(-a.length)===a:"~="===d?-1<(" "+q.replace(X," ")+" ").indexOf(a):"|="===d&&(q===a||q.slice(0,a.length+1)===a+"-"))}},CHILD:function(b,c,d,a,q){var e="nth"!==b.slice(0,3),g="last"!==b.slice(-4),k="of-type"===c;return 1===a&&0===q?function(b){return!!b.parentNode}:function(c,d,u){var n,I,f,l,h,v;d=e!==g?"nextSibling":"previousSibling";
var V=c.parentNode,B=k&&c.nodeName.toLowerCase();u=!u&&!k;var z=!1;if(V){if(e){for(;d;){for(l=c;l=l[d];)if(k?l.nodeName.toLowerCase()===B:1===l.nodeType)return!1;v=d="only"===b&&!v&&"nextSibling"}return!0}if(v=[g?V.firstChild:V.lastChild],g&&u)for(l=V,f=l[R]||(l[R]={}),I=f[l.uniqueID]||(f[l.uniqueID]={}),n=I[b]||[],z=(h=n[0]===F&&n[1])&&n[2],l=h&&V.childNodes[h];l=++h&&l&&l[d]||(z=h=0)||v.pop();){if(1===l.nodeType&&++z&&l===c){I[b]=[F,h,z];break}}else if(u&&(l=c,f=l[R]||(l[R]={}),I=f[l.uniqueID]||
(f[l.uniqueID]={}),n=I[b]||[],h=n[0]===F&&n[1],z=h),!1===z)for(;(l=++h&&l&&l[d]||(z=h=0)||v.pop())&&((k?l.nodeName.toLowerCase()!==B:1!==l.nodeType)||!++z||(u&&(f=l[R]||(l[R]={}),I=f[l.uniqueID]||(f[l.uniqueID]={}),I[b]=[F,z]),l!==c)););return z-=q,z===a||0===z%a&&0<=z/a}}},PSEUDO:function(b,d){var q,e=L.pseudos[b]||L.setFilters[b.toLowerCase()]||c.error("unsupported pseudo: "+b);return e[R]?e(d):1<e.length?(q=[b,b,"",d],L.setFilters.hasOwnProperty(b.toLowerCase())?a(function(b,c){for(var a,q=e(b,
d),g=q.length;g--;)a=na(b,q[g]),b[a]=!(c[a]=q[g])}):function(b){return e(b,0,q)}):e}},pseudos:{not:a(function(b){var c=[],d=[],q=la(b.replace(xa,"$1"));return q[R]?a(function(b,c,d,a){var e;d=q(b,null,a,[]);for(a=b.length;a--;)(e=d[a])&&(b[a]=!(c[a]=e))}):function(b,a,e){return c[0]=b,q(c,null,e,d),c[0]=null,!d.pop()}}),has:a(function(b){return function(d){return 0<c(b,d).length}}),contains:a(function(b){return b=b.replace(da,ra),function(c){return-1<(c.textContent||c.innerText||t(c)).indexOf(b)}}),
lang:a(function(b){return aa.test(b||"")||c.error("unsupported lang: "+b),b=b.replace(da,ra).toLowerCase(),function(c){var d;do if(d=H?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return d=d.toLowerCase(),d===b||0===d.indexOf(b+"-");while((c=c.parentNode)&&1===c.nodeType);return!1}}),target:function(c){var d=b.location&&b.location.hash;return d&&d.slice(1)===c.id},root:function(b){return b===U},focus:function(b){return b===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(b.type||b.href||
~b.tabIndex)},enabled:l(!1),disabled:l(!0),checked:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&!!b.checked||"option"===c&&!!b.selected},selected:function(b){return b.parentNode&&b.parentNode.selectedIndex,!0===b.selected},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(6>b.nodeType)return!1;return!0},parent:function(b){return!L.pseudos.empty(b)},header:function(b){return ja.test(b.nodeName)},input:function(b){return fa.test(b.nodeName)},button:function(b){var c=b.nodeName.toLowerCase();
return"input"===c&&"button"===b.type||"button"===c},text:function(b){var c;return"input"===b.nodeName.toLowerCase()&&"text"===b.type&&(null==(c=b.getAttribute("type"))||"text"===c.toLowerCase())},first:h(function(){return[0]}),last:h(function(b,c){return[c-1]}),eq:h(function(b,c,d){return[0>d?d+c:d]}),even:h(function(b,c){for(var d=0;d<c;d+=2)b.push(d);return b}),odd:h(function(b,c){for(var d=1;d<c;d+=2)b.push(d);return b}),lt:h(function(b,c,d){for(c=0>d?d+c:d;0<=--c;)b.push(c);return b}),gt:h(function(b,
c,d){for(d=0>d?d+c:d;++d<c;)b.push(d);return b})}};L.pseudos.nth=L.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})L.pseudos[w]=n(w);for(w in{submit:!0,reset:!0})L.pseudos[w]=f(w);B.prototype=L.filters=L.pseudos;L.setFilters=new B;ma=c.tokenize=function(b,d){var a,q,e,g,u,k,n;if(u=ha[b+" "])return d?0:u.slice(0);u=b;k=[];for(n=L.preFilter;u;){a&&!(q=Y.exec(u))||(q&&(u=u.slice(q[0].length)||u),k.push(e=[]));a=!1;(q=Ga.exec(u))&&(a=q.shift(),e.push({value:a,type:q[0].replace(xa,
" ")}),u=u.slice(a.length));for(g in L.filter)!(q=wa[g].exec(u))||n[g]&&!(q=n[g](q))||(a=q.shift(),e.push({value:a,type:g,matches:q}),u=u.slice(a.length));if(!a)break}return d?u.length:u?c.error(b):ha(b,k).slice(0)};return la=c.compile=function(b,c){var d,a=[],q=[],e=D[b+" "];if(!e){c||(c=ma(b));for(d=c.length;d--;)e=x(c[d]),e[R]?a.push(e):q.push(e);e=D(b,C(q,a));e.selector=b}return e},Ba=c.select=function(b,c,d,a){var q,e,g,u,k,n="function"==typeof b&&b,l=!a&&ma(b=n.selector||b);if(d=d||[],1===l.length){if(e=
l[0]=l[0].slice(0),2<e.length&&"ID"===(g=e[0]).type&&9===c.nodeType&&H&&L.relative[e[1].type]){if(c=(L.find.ID(g.matches[0].replace(da,ra),c)||[])[0],!c)return d;n&&(c=c.parentNode);b=b.slice(e.shift().value.length)}for(q=wa.needsContext.test(b)?0:e.length;q--&&(g=e[q],!L.relative[u=g.type]);)if((k=L.find[u])&&(a=k(g.matches[0].replace(da,ra),za.test(e[0].type)&&v(c.parentNode)||c))){if(e.splice(q,1),b=a.length&&z(e),!b)return Q.apply(d,a),d;break}}return(n||la(b,l))(a,c,!H,d,!c||za.test(b)&&v(c.parentNode)||
c),d},m.sortStable=R.split("").sort(P).join("")===R,m.detectDuplicates=!!sa,r(),m.sortDetached=e(function(b){return 1&b.compareDocumentPosition(p.createElement("fieldset"))}),e(function(b){return b.innerHTML="<a href='#'></a>","#"===b.firstChild.getAttribute("href")})||g("type|href|height|width",function(b,c,d){if(!d)return b.getAttribute(c,"type"===c.toLowerCase()?1:2)}),m.attributes&&e(function(b){return b.innerHTML="<input/>",b.firstChild.setAttribute("value",""),""===b.firstChild.getAttribute("value")})||
g("value",function(b,c,d){if(!d&&"input"===b.nodeName.toLowerCase())return b.defaultValue}),e(function(b){return null==b.getAttribute("disabled")})||g("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(b,c,d){var a;if(!d)return!0===b[c]?c.toLowerCase():(a=b.getAttributeNode(c))&&a.specified?a.value:null}),c}(h);d.find=na;d.expr=na.selectors;d.expr[":"]=d.expr.pseudos;d.uniqueSort=d.unique=na.uniqueSort;d.text=na.getText;
d.isXMLDoc=na.isXML;d.contains=na.contains;d.escapeSelector=na.escape;var ta=function(b,c,a){for(var q=[],e=void 0!==a;(b=b[c])&&9!==b.nodeType;)if(1===b.nodeType){if(e&&d(b).is(a))break;q.push(b)}return q},wa=function(b,c){for(var d=[];b;b=b.nextSibling)1===b.nodeType&&b!==c&&d.push(b);return d},xa=d.expr.match.needsContext,za=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,$a=/^.[^:#\[\.,]*$/;d.filter=function(b,c,a){var q=c[0];return a&&(b=":not("+b+")"),1===c.length&&1===q.nodeType?
d.find.matchesSelector(q,b)?[q]:[]:d.find.matches(b,d.grep(c,function(b){return 1===b.nodeType}))};d.fn.extend({find:function(b){var c,a,e=this.length,g=this;if("string"!=typeof b)return this.pushStack(d(b).filter(function(){for(c=0;c<e;c++)if(d.contains(g[c],this))return!0}));a=this.pushStack([]);for(c=0;c<e;c++)d.find(b,g[c],a);return 1<e?d.uniqueSort(a):a},filter:function(b){return this.pushStack(aa(this,b||[],!1))},not:function(b){return this.pushStack(aa(this,b||[],!0))},is:function(b){return!!aa(this,
"string"==typeof b&&xa.test(b)?d(b):b||[],!1).length}});var Qa,ib=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(d.fn.init=function(b,c,a){var q,e;if(!b)return this;if(a=a||Qa,"string"==typeof b){if(q="<"===b[0]&&">"===b[b.length-1]&&3<=b.length?[null,b,null]:ib.exec(b),!q||!q[1]&&c)return!c||c.jquery?(c||a).find(b):this.constructor(c).find(b);if(q[1]){if(c=c instanceof d?c[0]:c,d.merge(this,d.parseHTML(q[1],c&&c.nodeType?c.ownerDocument||c:g,!0)),za.test(q[1])&&d.isPlainObject(c))for(q in c)d.isFunction(this[q])?
this[q](c[q]):this.attr(q,c[q]);return this}return e=g.getElementById(q[2]),e&&(this[0]=e,this.length=1),this}return b.nodeType?(this[0]=b,this.length=1,this):d.isFunction(b)?void 0!==a.ready?a.ready(b):b(d):d.makeArray(b,this)}).prototype=d.fn;Qa=d(g);var jb=/^(?:parents|prev(?:Until|All))/,kb={children:!0,contents:!0,next:!0,prev:!0};d.fn.extend({has:function(b){var c=d(b,this),a=c.length;return this.filter(function(){for(var b=0;b<a;b++)if(d.contains(this,c[b]))return!0})},closest:function(b,c){var a,
e=0,g=this.length,k=[],n="string"!=typeof b&&d(b);if(!xa.test(b))for(;e<g;e++)for(a=this[e];a&&a!==c;a=a.parentNode)if(11>a.nodeType&&(n?-1<n.index(a):1===a.nodeType&&d.find.matchesSelector(a,b))){k.push(a);break}return this.pushStack(1<k.length?d.uniqueSort(k):k)},index:function(b){return b?"string"==typeof b?l.call(d(b),this[0]):l.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(b,c){return this.pushStack(d.uniqueSort(d.merge(this.get(),d(b,c))))},
addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});d.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return ta(b,"parentNode")},parentsUntil:function(b,c,d){return ta(b,"parentNode",d)},next:function(b){return N(b,"nextSibling")},prev:function(b){return N(b,"previousSibling")},nextAll:function(b){return ta(b,"nextSibling")},prevAll:function(b){return ta(b,"previousSibling")},nextUntil:function(b,c,d){return ta(b,"nextSibling",
d)},prevUntil:function(b,c,d){return ta(b,"previousSibling",d)},siblings:function(b){return wa((b.parentNode||{}).firstChild,b)},children:function(b){return wa(b.firstChild)},contents:function(b){return D(b,"iframe")?b.contentDocument:(D(b,"template")&&(b=b.content||b),d.merge([],b.childNodes))}},function(b,c){d.fn[b]=function(a,e){var q=d.map(this,c,a);return"Until"!==b.slice(-5)&&(e=a),e&&"string"==typeof e&&(q=d.filter(e,q)),1<this.length&&(kb[b]||d.uniqueSort(q),jb.test(b)&&q.reverse()),this.pushStack(q)}});
var pa=/[^\x20\t\r\n\f]+/g;d.Callbacks=function(b){b="string"==typeof b?ja(b):d.extend({},b);var c,a,e,g,k=[],n=[],l=-1,f=function(){g=g||b.once;for(e=c=!0;n.length;l=-1)for(a=n.shift();++l<k.length;)!1===k[l].apply(a[0],a[1])&&b.stopOnFalse&&(l=k.length,a=!1);b.memory||(a=!1);c=!1;g&&(k=a?[]:"")},h={add:function(){return k&&(a&&!c&&(l=k.length-1,n.push(a)),function cb(c){d.each(c,function(c,a){d.isFunction(a)?b.unique&&h.has(a)||k.push(a):a&&a.length&&"string"!==d.type(a)&&cb(a)})}(arguments),a&&
!c&&f()),this},remove:function(){return d.each(arguments,function(b,c){for(var a;-1<(a=d.inArray(c,k,a));)k.splice(a,1),a<=l&&l--}),this},has:function(b){return b?-1<d.inArray(b,k):0<k.length},empty:function(){return k&&(k=[]),this},disable:function(){return g=n=[],k=a="",this},disabled:function(){return!k},lock:function(){return g=n=[],a||c||(k=a=""),this},locked:function(){return!!g},fireWith:function(b,d){return g||(d=d||[],d=[b,d.slice?d.slice():d],n.push(d),c||f()),this},fire:function(){return h.fireWith(this,
arguments),this},fired:function(){return!!e}};return h};d.extend({Deferred:function(b){var c=[["notify","progress",d.Callbacks("memory"),d.Callbacks("memory"),2],["resolve","done",d.Callbacks("once memory"),d.Callbacks("once memory"),0,"resolved"],["reject","fail",d.Callbacks("once memory"),d.Callbacks("once memory"),1,"rejected"]],a="pending",e={state:function(){return a},always:function(){return g.done(arguments).fail(arguments),this},"catch":function(b){return e.then(null,b)},pipe:function(){var b=
arguments;return d.Deferred(function(a){d.each(c,function(c,e){var q=d.isFunction(b[e[4]])&&b[e[4]];g[e[1]](function(){var b=q&&q.apply(this,arguments);b&&d.isFunction(b.promise)?b.promise().progress(a.notify).done(a.resolve).fail(a.reject):a[e[0]+"With"](this,q?[b]:arguments)})});b=null}).promise()},then:function(b,a,e){function q(b,c,a,e){return function(){var k=this,n=arguments,u=function(){var u,l;if(!(b<g)){if(u=a.apply(k,n),u===c.promise())throw new TypeError("Thenable self-resolution");l=u&&
("object"==typeof u||"function"==typeof u)&&u.then;d.isFunction(l)?e?l.call(u,q(g,c,A,e),q(g,c,m,e)):(g++,l.call(u,q(g,c,A,e),q(g,c,m,e),q(g,c,A,c.notifyWith))):(a!==A&&(k=void 0,n=[u]),(e||c.resolveWith)(k,n))}},l=e?u:function(){try{u()}catch(Pa){d.Deferred.exceptionHook&&d.Deferred.exceptionHook(Pa,l.stackTrace),b+1>=g&&(a!==m&&(k=void 0,n=[Pa]),c.rejectWith(k,n))}};b?l():(d.Deferred.getStackHook&&(l.stackTrace=d.Deferred.getStackHook()),h.setTimeout(l))}}var g=0;return d.Deferred(function(g){c[0][3].add(q(0,
g,d.isFunction(e)?e:A,g.notifyWith));c[1][3].add(q(0,g,d.isFunction(b)?b:A));c[2][3].add(q(0,g,d.isFunction(a)?a:m))}).promise()},promise:function(b){return null!=b?d.extend(b,e):e}},g={};return d.each(c,function(b,d){var q=d[2],k=d[5];e[d[1]]=q.add;k&&q.add(function(){a=k},c[3-b][2].disable,c[0][2].lock);q.add(d[3].fire);g[d[0]]=function(){return g[d[0]+"With"](this===g?void 0:this,arguments),this};g[d[0]+"With"]=q.fireWith}),e.promise(g),b&&b.call(g,g),g},when:function(b){var c=arguments.length,
a=c,e=Array(a),g=k.call(arguments),n=d.Deferred(),l=function(b){return function(d){e[b]=this;g[b]=1<arguments.length?k.call(arguments):d;--c||n.resolveWith(e,g)}};if(1>=c&&(y(b,n.done(l(a)).resolve,n.reject,!c),"pending"===n.state()||d.isFunction(g[a]&&g[a].then)))return n.then();for(;a--;)y(g[a],l(a),n.reject);return n.promise()}});var lb=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;d.Deferred.exceptionHook=function(b,c){h.console&&h.console.warn&&b&&lb.test(b.name)&&h.console.warn("jQuery.Deferred exception: "+
b.message,b.stack,c)};d.readyException=function(b){h.setTimeout(function(){throw b;})};var Ha=d.Deferred();d.fn.ready=function(b){return Ha.then(b)["catch"](function(b){d.readyException(b)}),this};d.extend({isReady:!1,readyWait:1,ready:function(b){(!0===b?--d.readyWait:d.isReady)||(d.isReady=!0,!0!==b&&0<--d.readyWait||Ha.resolveWith(g,[d]))}});d.ready.then=Ha.then;"complete"===g.readyState||"loading"!==g.readyState&&!g.documentElement.doScroll?h.setTimeout(d.ready):(g.addEventListener("DOMContentLoaded",
r),h.addEventListener("load",r));var da=function(b,c,a,e,g,k,n){var q=0,u=b.length,l=null==a;if("object"===d.type(a))for(q in g=!0,a)da(b,c,q,a[q],!0,k,n);else if(void 0!==e&&(g=!0,d.isFunction(e)||(n=!0),l&&(n?(c.call(b,e),c=null):(l=c,c=function(b,c,a){return l.call(d(b),a)})),c))for(;q<u;q++)c(b[q],a,n?e:e.call(b[q],q,c(b[q],a)));return g?b:l?c.call(b):u?c(b[0],a):k},Ca=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};J.uid=1;J.prototype={cache:function(b){var c=b[this.expando];
return c||(c={},Ca(b)&&(b.nodeType?b[this.expando]=c:Object.defineProperty(b,this.expando,{value:c,configurable:!0}))),c},set:function(b,c,a){var e;b=this.cache(b);if("string"==typeof c)b[d.camelCase(c)]=a;else for(e in c)b[d.camelCase(e)]=c[e];return b},get:function(b,c){return void 0===c?this.cache(b):b[this.expando]&&b[this.expando][d.camelCase(c)]},access:function(b,c,d){return void 0===c||c&&"string"==typeof c&&void 0===d?this.get(b,c):(this.set(b,c,d),void 0!==d?d:c)},remove:function(b,c){var a,
e=b[this.expando];if(void 0!==e){if(void 0!==c)for(Array.isArray(c)?c=c.map(d.camelCase):(c=d.camelCase(c),c=c in e?[c]:c.match(pa)||[]),a=c.length;a--;)delete e[c[a]];(void 0===c||d.isEmptyObject(e))&&(b.nodeType?b[this.expando]=void 0:delete b[this.expando])}},hasData:function(b){b=b[this.expando];return void 0!==b&&!d.isEmptyObject(b)}};var Q=new J,fa=new J,bb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ab=/[A-Z]/g;d.extend({hasData:function(b){return fa.hasData(b)||Q.hasData(b)},data:function(b,c,d){return fa.access(b,
c,d)},removeData:function(b,c){fa.remove(b,c)},_data:function(b,c,d){return Q.access(b,c,d)},_removeData:function(b,c){Q.remove(b,c)}});d.fn.extend({data:function(b,c){var a,e,g,k=this[0],n=k&&k.attributes;if(void 0===b){if(this.length&&(g=fa.get(k),1===k.nodeType&&!Q.get(k,"hasDataAttrs"))){for(a=n.length;a--;)n[a]&&(e=n[a].name,0===e.indexOf("data-")&&(e=d.camelCase(e.slice(5)),F(k,e,g[e])));Q.set(k,"hasDataAttrs",!0)}return g}return"object"==typeof b?this.each(function(){fa.set(this,b)}):da(this,
function(c){var d;if(k&&void 0===c){if((d=fa.get(k,b),void 0!==d)||(d=F(k,b),void 0!==d))return d}else this.each(function(){fa.set(this,b,c)})},null,c,1<arguments.length,null,!0)},removeData:function(b){return this.each(function(){fa.remove(this,b)})}});d.extend({queue:function(b,c,a){var e;if(b)return c=(c||"fx")+"queue",e=Q.get(b,c),a&&(!e||Array.isArray(a)?e=Q.access(b,c,d.makeArray(a)):e.push(a)),e||[]},dequeue:function(b,c){c=c||"fx";var a=d.queue(b,c),e=a.length,g=a.shift(),k=d._queueHooks(b,
c),n=function(){d.dequeue(b,c)};"inprogress"===g&&(g=a.shift(),e--);g&&("fx"===c&&a.unshift("inprogress"),delete k.stop,g.call(b,n,k));!e&&k&&k.empty.fire()},_queueHooks:function(b,c){var a=c+"queueHooks";return Q.get(b,a)||Q.access(b,a,{empty:d.Callbacks("once memory").add(function(){Q.remove(b,[c+"queue",a])})})}});d.fn.extend({queue:function(b,c){var a=2;return"string"!=typeof b&&(c=b,b="fx",a--),arguments.length<a?d.queue(this[0],b):void 0===c?this:this.each(function(){var a=d.queue(this,b,c);
d._queueHooks(this,b);"fx"===b&&"inprogress"!==a[0]&&d.dequeue(this,b)})},dequeue:function(b){return this.each(function(){d.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,c){var a,e=1,g=d.Deferred(),k=this,n=this.length,l=function(){--e||g.resolveWith(k,[k])};"string"!=typeof b&&(c=b,b=void 0);for(b=b||"fx";n--;)(a=Q.get(k[n],b+"queueHooks"))&&a.empty&&(e++,a.empty.add(l));return l(),g.promise(c)}});var Ra=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,va=
new RegExp("^(?:([+-])=|)("+Ra+")([a-z%]*)$","i"),qa=["Top","Right","Bottom","Left"],Ia=function(b,c){return b=c||b,"none"===b.style.display||""===b.style.display&&d.contains(b.ownerDocument,b)&&"none"===d.css(b,"display")},Sa=function(b,c,d,a){var e,q={};for(e in c)q[e]=b.style[e],b.style[e]=c[e];d=d.apply(b,a||[]);for(e in c)b.style[e]=q[e];return d},Ja={};d.fn.extend({show:function(){return Z(this,!0)},hide:function(){return Z(this)},toggle:function(b){return"boolean"==typeof b?b?this.show():this.hide():
this.each(function(){Ia(this)?d(this).show():d(this).hide()})}});var Ta=/^(?:checkbox|radio)$/i,Ka=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,La=/^$|\/(?:java|ecma)script/i,ea={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ea.optgroup=ea.option;ea.tbody=ea.tfoot=ea.colgroup=ea.caption=ea.thead;ea.th=ea.td;
var db=/<|&#?\w+;/;!function(){var b=g.createDocumentFragment().appendChild(g.createElement("div")),c=g.createElement("input");c.setAttribute("type","radio");c.setAttribute("checked","checked");c.setAttribute("name","t");b.appendChild(c);S.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked;b.innerHTML="<textarea>x</textarea>";S.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Da=g.documentElement,mb=/^key/,nb=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ua=/^([^.]*)(?:\.(.+)|)/;
d.event={global:{},add:function(b,c,a,e,g){var q,k,n,l,u,f,h,v,I,z;if(u=Q.get(b))for(a.handler&&(q=a,a=q.handler,g=q.selector),g&&d.find.matchesSelector(Da,g),a.guid||(a.guid=d.guid++),(l=u.events)||(l=u.events={}),(k=u.handle)||(k=u.handle=function(c){return"undefined"!=typeof d&&d.event.triggered!==c.type?d.event.dispatch.apply(b,arguments):void 0}),c=(c||"").match(pa)||[""],u=c.length;u--;)n=Ua.exec(c[u])||[],I=z=n[1],n=(n[2]||"").split(".").sort(),I&&(h=d.event.special[I]||{},I=(g?h.delegateType:
h.bindType)||I,h=d.event.special[I]||{},f=d.extend({type:I,origType:z,data:e,handler:a,guid:a.guid,selector:g,needsContext:g&&d.expr.match.needsContext.test(g),namespace:n.join(".")},q),(v=l[I])||(v=l[I]=[],v.delegateCount=0,h.setup&&!1!==h.setup.call(b,e,n,k)||b.addEventListener&&b.addEventListener(I,k)),h.add&&(h.add.call(b,f),f.handler.guid||(f.handler.guid=a.guid)),g?v.splice(v.delegateCount++,0,f):v.push(f),d.event.global[I]=!0)},remove:function(b,c,a,e,g){var q,k,n,l,u,f,h,v,I,z,B,E=Q.hasData(b)&&
Q.get(b);if(E&&(l=E.events)){c=(c||"").match(pa)||[""];for(u=c.length;u--;)if(n=Ua.exec(c[u])||[],I=B=n[1],z=(n[2]||"").split(".").sort(),I){h=d.event.special[I]||{};I=(e?h.delegateType:h.bindType)||I;v=l[I]||[];n=n[2]&&new RegExp("(^|\\.)"+z.join("\\.(?:.*\\.|)")+"(\\.|$)");for(k=q=v.length;q--;)f=v[q],!g&&B!==f.origType||a&&a.guid!==f.guid||n&&!n.test(f.namespace)||e&&e!==f.selector&&("**"!==e||!f.selector)||(v.splice(q,1),f.selector&&v.delegateCount--,h.remove&&h.remove.call(b,f));k&&!v.length&&
(h.teardown&&!1!==h.teardown.call(b,z,E.handle)||d.removeEvent(b,I,E.handle),delete l[I])}else for(I in l)d.event.remove(b,I+c[u],a,e,!0);d.isEmptyObject(l)&&Q.remove(b,"handle events")}},dispatch:function(b){var c=d.event.fix(b),a,e,g,k,n,l,f=Array(arguments.length);e=(Q.get(this,"events")||{})[c.type]||[];var h=d.event.special[c.type]||{};f[0]=c;for(a=1;a<arguments.length;a++)f[a]=arguments[a];if(c.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,c)){l=d.event.handlers.call(this,
c,e);for(a=0;(k=l[a++])&&!c.isPropagationStopped();)for(c.currentTarget=k.elem,e=0;(n=k.handlers[e++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!c.rnamespace.test(n.namespace)||(c.handleObj=n,c.data=n.data,g=((d.event.special[n.origType]||{}).handle||n.handler).apply(k.elem,f),void 0!==g&&!1===(c.result=g)&&(c.preventDefault(),c.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,c),c.result}},handlers:function(b,c){var a,e,g,k,n,l=[],f=c.delegateCount,h=b.target;if(f&&h.nodeType&&
!("click"===b.type&&1<=b.button))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==b.type||!0!==h.disabled)){k=[];n={};for(a=0;a<f;a++)e=c[a],g=e.selector+" ",void 0===n[g]&&(n[g]=e.needsContext?-1<d(g,this).index(h):d.find(g,this,null,[h]).length),n[g]&&k.push(e);k.length&&l.push({elem:h,handlers:k})}return h=this,f<c.length&&l.push({elem:h,handlers:c.slice(f)}),l},addProp:function(b,c){Object.defineProperty(d.Event.prototype,b,{enumerable:!0,configurable:!0,get:d.isFunction(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:
function(){if(this.originalEvent)return this.originalEvent[b]},set:function(c){Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:c})}})},fix:function(b){return b[d.expando]?b:new d.Event(b)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===p()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&
D(this,"input"))return this.click(),!1},_default:function(b){return D(b.target,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&b.originalEvent&&(b.originalEvent.returnValue=b.result)}}}};d.removeEvent=function(b,c,d){b.removeEventListener&&b.removeEventListener(c,d)};d.Event=function(b,c){return this instanceof d.Event?(b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&!1===b.returnValue?T:H,this.target=b.target&&
3===b.target.nodeType?b.target.parentNode:b.target,this.currentTarget=b.currentTarget,this.relatedTarget=b.relatedTarget):this.type=b,c&&d.extend(this,c),this.timeStamp=b&&b.timeStamp||d.now(),void(this[d.expando]=!0)):new d.Event(b,c)};d.Event.prototype={constructor:d.Event,isDefaultPrevented:H,isPropagationStopped:H,isImmediatePropagationStopped:H,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=T;b&&!this.isSimulated&&b.preventDefault()},stopPropagation:function(){var b=
this.originalEvent;this.isPropagationStopped=T;b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=T;b&&!this.isSimulated&&b.stopImmediatePropagation();this.stopPropagation()}};d.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,
offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(b){var c=b.button;return null==b.which&&mb.test(b.type)?null!=b.charCode?b.charCode:b.keyCode:!b.which&&void 0!==c&&nb.test(b.type)?1&c?1:2&c?3:4&c?2:0:b.which}},d.event.addProp);d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,c){d.event.special[b]={delegateType:c,bindType:c,handle:function(b){var a,e=b.relatedTarget,
g=b.handleObj;return e&&(e===this||d.contains(this,e))||(b.type=g.origType,a=g.handler.apply(this,arguments),b.type=c),a}}});d.fn.extend({on:function(b,c,d,a){return ka(this,b,c,d,a)},one:function(b,c,d,a){return ka(this,b,c,d,a,1)},off:function(b,c,a){var e,g;if(b&&b.preventDefault&&b.handleObj)return e=b.handleObj,d(b.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof b){for(g in b)this.off(g,c,b[g]);return this}return!1!==c&&"function"!=
typeof c||(a=c,c=void 0),!1===a&&(a=H),this.each(function(){d.event.remove(this,b,a,c)})}});var ob=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,pb=/<script|<style|<link/i,fb=/checked\s*(?:[^=]|=\s*.checked.)/i,eb=/^true\/(.*)/,gb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;d.extend({htmlPrefilter:function(b){return b.replace(ob,"<$1></$2>")},clone:function(b,c,a){var e,g,q,k,n=b.cloneNode(!0),l=d.contains(b.ownerDocument,b);if(!(S.noCloneChecked||1!==
b.nodeType&&11!==b.nodeType||d.isXMLDoc(b)))for(k=w(n),q=w(b),e=0,g=q.length;e<g;e++){var f=q[e],h=k[e],v=h.nodeName.toLowerCase();"input"===v&&Ta.test(f.type)?h.checked=f.checked:"input"!==v&&"textarea"!==v||(h.defaultValue=f.defaultValue)}if(c)if(a)for(q=q||w(b),k=k||w(n),e=0,g=q.length;e<g;e++)Aa(q[e],k[e]);else Aa(b,n);return k=w(n,"script"),0<k.length&&G(k,!l&&w(b,"script")),n},cleanData:function(b){for(var c,a,e,g=d.event.special,k=0;void 0!==(a=b[k]);k++)if(Ca(a)){if(c=a[Q.expando]){if(c.events)for(e in c.events)g[e]?
d.event.remove(a,e):d.removeEvent(a,e,c.handle);a[Q.expando]=void 0}a[fa.expando]&&(a[fa.expando]=void 0)}}});d.fn.extend({detach:function(b){return R(this,b,!0)},remove:function(b){return R(this,b)},text:function(b){return da(this,function(b){return void 0===b?d.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=b)})},null,b,arguments.length)},append:function(){return ba(this,arguments,function(b){1!==this.nodeType&&11!==this.nodeType&&
9!==this.nodeType||B(this,b).appendChild(b)})},prepend:function(){return ba(this,arguments,function(b){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=B(this,b);c.insertBefore(b,c.firstChild)}})},before:function(){return ba(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return ba(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var b,c=0;null!=(b=this[c]);c++)1===
b.nodeType&&(d.cleanData(w(b,!1)),b.textContent="");return this},clone:function(b,c){return b=null!=b&&b,c=null==c?b:c,this.map(function(){return d.clone(this,b,c)})},html:function(b){return da(this,function(b){var c=this[0]||{},a=0,e=this.length;if(void 0===b&&1===c.nodeType)return c.innerHTML;if("string"==typeof b&&!pb.test(b)&&!ea[(Ka.exec(b)||["",""])[1].toLowerCase()]){b=d.htmlPrefilter(b);try{for(;a<e;a++)c=this[a]||{},1===c.nodeType&&(d.cleanData(w(c,!1)),c.innerHTML=b);c=0}catch(V){}}c&&this.empty().append(b)},
null,b,arguments.length)},replaceWith:function(){var b=[];return ba(this,arguments,function(c){var a=this.parentNode;0>d.inArray(this,b)&&(d.cleanData(w(this)),a&&a.replaceChild(c,this))},b)}});d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,c){d.fn[b]=function(b){for(var a=[],e=d(b),g=e.length-1,q=0;q<=g;q++)b=q===g?this:this.clone(!0),d(e[q])[c](b),v.apply(a,b.get());return this.pushStack(a)}});var Ma=/^margin/,Ea=new RegExp("^("+
Ra+")(?!px)[a-z%]+$","i"),ya=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=h),c.getComputedStyle(b)};!function(){function b(){if(l){l.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";l.innerHTML="";Da.appendChild(n);var b=h.getComputedStyle(l);c="1%"!==b.top;k="2px"===b.marginLeft;a="4px"===b.width;l.style.marginRight="50%";e="4px"===b.marginRight;Da.removeChild(n);l=null}}var c,a,e,k,n=g.createElement("div"),
l=g.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",S.clearCloneStyle="content-box"===l.style.backgroundClip,n.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",n.appendChild(l),d.extend(S,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),a},pixelMarginRight:function(){return b(),e},reliableMarginLeft:function(){return b(),k}}))}();var qb=/^(none|table(?!-c[ea]).+)/,
Va=/^--/,rb={position:"absolute",visibility:"hidden",display:"block"},Wa={letterSpacing:"0",fontWeight:"400"},Oa=["Webkit","Moz","ms"],Na=g.createElement("div").style;d.extend({cssHooks:{opacity:{get:function(b,c){if(c){var d=ga(b,"opacity");return""===d?"1":d}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(b,c,a,e){if(b&&
3!==b.nodeType&&8!==b.nodeType&&b.style){var g,q,k,n=d.camelCase(c),l=Va.test(c),f=b.style;return l||(c=ca(n)),k=d.cssHooks[c]||d.cssHooks[n],void 0===a?k&&"get"in k&&void 0!==(g=k.get(b,!1,e))?g:f[c]:(q=typeof a,"string"===q&&(g=va.exec(a))&&g[1]&&(a=K(b,c,g),q="number"),null!=a&&a===a&&("number"===q&&(a+=g&&g[3]||(d.cssNumber[n]?"":"px")),S.clearCloneStyle||""!==a||0!==c.indexOf("background")||(f[c]="inherit"),k&&"set"in k&&void 0===(a=k.set(b,a,e))||(l?f.setProperty(c,a):f[c]=a)),void 0)}},css:function(b,
c,a,e){var g,q,k,n=d.camelCase(c);return Va.test(c)||(c=ca(n)),k=d.cssHooks[c]||d.cssHooks[n],k&&"get"in k&&(g=k.get(b,!0,a)),void 0===g&&(g=ga(b,c,e)),"normal"===g&&c in Wa&&(g=Wa[c]),""===a||a?(q=parseFloat(g),!0===a||isFinite(q)?q||0:g):g}});d.each(["height","width"],function(b,c){d.cssHooks[c]={get:function(b,a,e){if(a)return!qb.test(d.css(b,"display"))||b.getClientRects().length&&b.getBoundingClientRect().width?Y(b,c,e):Sa(b,rb,function(){return Y(b,c,e)})},set:function(b,a,e){var g,k=e&&ya(b);
e=e&&X(b,c,e,"border-box"===d.css(b,"boxSizing",!1,k),k);return e&&(g=va.exec(a))&&"px"!==(g[3]||"px")&&(b.style[c]=a,a=d.css(b,c)),oa(b,a,e)}}});d.cssHooks.marginLeft=ha(S.reliableMarginLeft,function(b,c){if(c)return(parseFloat(ga(b,"marginLeft"))||b.getBoundingClientRect().left-Sa(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"});d.each({margin:"",padding:"",border:"Width"},function(b,c){d.cssHooks[b+c]={expand:function(d){var a=0,e={};for(d="string"==typeof d?d.split(" "):
[d];4>a;a++)e[b+qa[a]+c]=d[a]||d[a-2]||d[0];return e}};Ma.test(b)||(d.cssHooks[b+c].set=oa)});d.fn.extend({css:function(b,c){return da(this,function(b,c,a){var e,g={},k=0;if(Array.isArray(c)){a=ya(b);for(e=c.length;k<e;k++)g[c[k]]=d.css(b,c[k],!1,a);return g}return void 0!==a?d.style(b,c,a):d.css(b,c)},b,c,1<arguments.length)}});d.fn.delay=function(b,c){return b=d.fx?d.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var a=h.setTimeout(c,b);d.stop=function(){h.clearTimeout(a)}})};(function(){var b=
g.createElement("input"),c=g.createElement("select").appendChild(g.createElement("option"));b.type="checkbox";S.checkOn=""!==b.value;S.optSelected=c.selected;b=g.createElement("input");b.value="t";b.type="radio";S.radioValue="t"===b.value})();var Xa,ua=d.expr.attrHandle;d.fn.extend({attr:function(b,c){return da(this,d.attr,b,c,1<arguments.length)},removeAttr:function(b){return this.each(function(){d.removeAttr(this,b)})}});d.extend({attr:function(b,c,a){var e,g,k=b.nodeType;if(3!==k&&8!==k&&2!==k)return"undefined"==
typeof b.getAttribute?d.prop(b,c,a):(1===k&&d.isXMLDoc(b)||(g=d.attrHooks[c.toLowerCase()]||(d.expr.match.bool.test(c)?Xa:void 0)),void 0!==a?null===a?void d.removeAttr(b,c):g&&"set"in g&&void 0!==(e=g.set(b,a,c))?e:(b.setAttribute(c,a+""),a):g&&"get"in g&&null!==(e=g.get(b,c))?e:(e=d.find.attr(b,c),null==e?void 0:e))},attrHooks:{type:{set:function(b,c){if(!S.radioValue&&"radio"===c&&D(b,"input")){var d=b.value;return b.setAttribute("type",c),d&&(b.value=d),c}}}},removeAttr:function(b,c){var d,a=
0,e=c&&c.match(pa);if(e&&1===b.nodeType)for(;d=e[a++];)b.removeAttribute(d)}});Xa={set:function(b,c,a){return!1===c?d.removeAttr(b,a):b.setAttribute(a,a),a}};d.each(d.expr.match.bool.source.match(/\w+/g),function(b,c){var a=ua[c]||d.find.attr;ua[c]=function(b,c,d){var e,g,k=c.toLowerCase();return d||(g=ua[k],ua[k]=e,e=null!=a(b,c,d)?k:null,ua[k]=g),e}});var sb=/^(?:input|select|textarea|button)$/i,tb=/^(?:a|area)$/i;d.fn.extend({prop:function(b,c){return da(this,d.prop,b,c,1<arguments.length)},removeProp:function(b){return this.each(function(){delete this[d.propFix[b]||
b]})}});d.extend({prop:function(b,c,a){var e,g,k=b.nodeType;if(3!==k&&8!==k&&2!==k)return 1===k&&d.isXMLDoc(b)||(c=d.propFix[c]||c,g=d.propHooks[c]),void 0!==a?g&&"set"in g&&void 0!==(e=g.set(b,a,c))?e:b[c]=a:g&&"get"in g&&null!==(e=g.get(b,c))?e:b[c]},propHooks:{tabIndex:{get:function(b){var c=d.find.attr(b,"tabindex");return c?parseInt(c,10):sb.test(b.nodeName)||tb.test(b.nodeName)&&b.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});S.optSelected||(d.propHooks.selected={get:function(b){b=
b.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(b){b=b.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}});d.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){d.propFix[this.toLowerCase()]=this});d.fn.extend({addClass:function(b){var c,a,e,g,k,n,l=0;if(d.isFunction(b))return this.each(function(c){d(this).addClass(b.call(this,c,P(this)))});if("string"==typeof b&&
b)for(c=b.match(pa)||[];a=this[l++];)if(g=P(a),e=1===a.nodeType&&" "+O(g)+" "){for(n=0;k=c[n++];)0>e.indexOf(" "+k+" ")&&(e+=k+" ");e=O(e);g!==e&&a.setAttribute("class",e)}return this},removeClass:function(b){var c,a,e,g,k,n,l=0;if(d.isFunction(b))return this.each(function(c){d(this).removeClass(b.call(this,c,P(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof b&&b)for(c=b.match(pa)||[];a=this[l++];)if(g=P(a),e=1===a.nodeType&&" "+O(g)+" "){for(n=0;k=c[n++];)for(;-1<
e.indexOf(" "+k+" ");)e=e.replace(" "+k+" "," ");e=O(e);g!==e&&a.setAttribute("class",e)}return this},toggleClass:function(b,c){var a=typeof b;return"boolean"==typeof c&&"string"===a?c?this.addClass(b):this.removeClass(b):d.isFunction(b)?this.each(function(a){d(this).toggleClass(b.call(this,a,P(this),c),c)}):this.each(function(){var c,e,g,k;if("string"===a)for(e=0,g=d(this),k=b.match(pa)||[];c=k[e++];)g.hasClass(c)?g.removeClass(c):g.addClass(c);else void 0!==b&&"boolean"!==a||(c=P(this),c&&Q.set(this,
"__className__",c),this.setAttribute&&this.setAttribute("class",c||!1===b?"":Q.get(this,"__className__")||""))})},hasClass:function(b){var c,d=0;for(b=" "+b+" ";c=this[d++];)if(1===c.nodeType&&-1<(" "+O(P(c))+" ").indexOf(b))return!0;return!1}});var ub=/\r/g;d.fn.extend({val:function(b){var c,a,e,g=this[0];if(arguments.length)return e=d.isFunction(b),this.each(function(a){var g;1===this.nodeType&&(g=e?b.call(this,a,d(this).val()):b,null==g?g="":"number"==typeof g?g+="":Array.isArray(g)&&(g=d.map(g,
function(b){return null==b?"":b+""})),c=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&void 0!==c.set(this,g,"value")||(this.value=g))});if(g)return c=d.valHooks[g.type]||d.valHooks[g.nodeName.toLowerCase()],c&&"get"in c&&void 0!==(a=c.get(g,"value"))?a:(a=g.value,"string"==typeof a?a.replace(ub,""):null==a?"":a)}});d.extend({valHooks:{option:{get:function(b){var c=d.find.attr(b,"value");return null!=c?c:O(d.text(b))}},select:{get:function(b){var c,a,e=b.options,g=b.selectedIndex,
k="select-one"===b.type,n=k?null:[],l=k?g+1:e.length;for(a=0>g?l:k?g:0;a<l;a++)if(c=e[a],!(!c.selected&&a!==g||c.disabled||c.parentNode.disabled&&D(c.parentNode,"optgroup"))){if(b=d(c).val(),k)return b;n.push(b)}return n},set:function(b,c){for(var a,e,g=b.options,k=d.makeArray(c),n=g.length;n--;)e=g[n],(e.selected=-1<d.inArray(d.valHooks.option.get(e),k))&&(a=!0);return a||(b.selectedIndex=-1),k}}}});d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(b,c){if(Array.isArray(c))return b.checked=
-1<d.inArray(d(b).val(),c)}};S.checkOn||(d.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});var Ya=/^(?:focusinfocus|focusoutblur)$/;d.extend(d.event,{trigger:function(b,c,a,e){var k,n,q,l,f,v,z,B=[a||g],u=la.call(b,"type")?b.type:b;k=la.call(b,"namespace")?b.namespace.split("."):[];if(n=q=a=a||g,3!==a.nodeType&&8!==a.nodeType&&!Ya.test(u+d.event.triggered)&&(-1<u.indexOf(".")&&(k=u.split("."),u=k.shift(),k.sort()),f=0>u.indexOf(":")&&"on"+u,b=b[d.expando]?b:new d.Event(u,
"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=k.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=a),c=null==c?[b]:d.makeArray(c,[b]),z=d.event.special[u]||{},e||!z.trigger||!1!==z.trigger.apply(a,c))){if(!e&&!z.noBubble&&!d.isWindow(a)){l=z.delegateType||u;for(Ya.test(l+u)||(n=n.parentNode);n;n=n.parentNode)B.push(n),q=n;q===(a.ownerDocument||g)&&B.push(q.defaultView||q.parentWindow||h)}for(k=0;(n=B[k++])&&!b.isPropagationStopped();)b.type=
1<k?l:z.bindType||u,(v=(Q.get(n,"events")||{})[b.type]&&Q.get(n,"handle"))&&v.apply(n,c),(v=f&&n[f])&&v.apply&&Ca(n)&&(b.result=v.apply(n,c),!1===b.result&&b.preventDefault());return b.type=u,e||b.isDefaultPrevented()||z._default&&!1!==z._default.apply(B.pop(),c)||!Ca(a)||f&&d.isFunction(a[u])&&!d.isWindow(a)&&(q=a[f],q&&(a[f]=null),d.event.triggered=u,a[u](),d.event.triggered=void 0,q&&(a[f]=q)),b.result}},simulate:function(b,c,a){b=d.extend(new d.Event,a,{type:b,isSimulated:!0});d.event.trigger(b,
null,c)}});d.fn.extend({trigger:function(b,c){return this.each(function(){d.event.trigger(b,c,this)})},triggerHandler:function(b,c){var a=this[0];if(a)return d.event.trigger(b,c,a,!0)}});d.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(b,c){d.fn[c]=function(b,d){return 0<arguments.length?this.on(c,null,b,d):this.trigger(c)}});d.fn.extend({hover:function(b,
c){return this.mouseenter(b).mouseleave(c||b)}});S.focusin="onfocusin"in h;S.focusin||d.each({focus:"focusin",blur:"focusout"},function(b,c){var a=function(b){d.event.simulate(c,b.target,d.event.fix(b))};d.event.special[c]={setup:function(){var d=this.ownerDocument||this,e=Q.access(d,c);e||d.addEventListener(b,a,!0);Q.access(d,c,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=Q.access(d,c)-1;e?Q.access(d,c,e):(d.removeEventListener(b,a,!0),Q.remove(d,c))}}});var hb=/\[\]$/,Za=/\r?\n/g,
vb=/^(?:submit|button|image|reset|file)$/i,wb=/^(?:input|select|textarea|keygen)/i;d.param=function(b,c){var a,e=[],g=function(b,c){var a=d.isFunction(c)?c():c;e[e.length]=encodeURIComponent(b)+"="+encodeURIComponent(null==a?"":a)};if(Array.isArray(b)||b.jquery&&!d.isPlainObject(b))d.each(b,function(){g(this.name,this.value)});else for(a in b)M(a,b[a],c,g);return e.join("&")};d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=
d.prop(this,"elements");return b?d.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!d(this).is(":disabled")&&wb.test(this.nodeName)&&!vb.test(b)&&(this.checked||!Ta.test(b))}).map(function(b,c){var a=d(this).val();return null==a?null:Array.isArray(a)?d.map(a,function(b){return{name:c.name,value:b.replace(Za,"\r\n")}}):{name:c.name,value:a.replace(Za,"\r\n")}}).get()}});d.fn.extend({wrapAll:function(b){var c;return this[0]&&(d.isFunction(b)&&(b=b.call(this[0])),c=d(b,this[0].ownerDocument).eq(0).clone(!0),
this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var b=this;b.firstElementChild;)b=b.firstElementChild;return b}).append(this)),this},wrapInner:function(b){return d.isFunction(b)?this.each(function(c){d(this).wrapInner(b.call(this,c))}):this.each(function(){var c=d(this),a=c.contents();a.length?a.wrapAll(b):c.append(b)})},wrap:function(b){var c=d.isFunction(b);return this.each(function(a){d(this).wrapAll(c?b.call(this,a):b)})},unwrap:function(b){return this.parent(b).not("body").each(function(){d(this).replaceWith(this.childNodes)}),
this}});d.expr.pseudos.hidden=function(b){return!d.expr.pseudos.visible(b)};d.expr.pseudos.visible=function(b){return!!(b.offsetWidth||b.offsetHeight||b.getClientRects().length)};S.createHTMLDocument=function(){var b=g.implementation.createHTMLDocument("").body;return b.innerHTML="<form></form><form></form>",2===b.childNodes.length}();d.parseHTML=function(b,c,a){if("string"!=typeof b)return[];"boolean"==typeof c&&(a=c,c=!1);var e,k,n;return c||(S.createHTMLDocument?(c=g.implementation.createHTMLDocument(""),
e=c.createElement("base"),e.href=g.location.href,c.head.appendChild(e)):c=g),k=za.exec(b),n=!a&&[],k?[c.createElement(k[1])]:(k=U([b],c,n),n&&n.length&&d(n).remove(),d.merge([],k.childNodes))};d.offset={setOffset:function(b,c,a){var e,g,k,n,l,q,f=d.css(b,"position"),h=d(b),v={};"static"===f&&(b.style.position="relative");l=h.offset();k=d.css(b,"top");q=d.css(b,"left");("absolute"===f||"fixed"===f)&&-1<(k+q).indexOf("auto")?(e=h.position(),n=e.top,g=e.left):(n=parseFloat(k)||0,g=parseFloat(q)||0);
d.isFunction(c)&&(c=c.call(b,a,d.extend({},l)));null!=c.top&&(v.top=c.top-l.top+n);null!=c.left&&(v.left=c.left-l.left+g);"using"in c?c.using.call(b,v):h.css(v)}};d.fn.extend({offset:function(b){if(arguments.length)return void 0===b?this:this.each(function(c){d.offset.setOffset(this,b,c)});var c,a,e,g,k=this[0];if(k)return k.getClientRects().length?(e=k.getBoundingClientRect(),c=k.ownerDocument,a=c.documentElement,g=c.defaultView,{top:e.top+g.pageYOffset-a.clientTop,left:e.left+g.pageXOffset-a.clientLeft}):
{top:0,left:0}},position:function(){if(this[0]){var b,c,a=this[0],e={top:0,left:0};return"fixed"===d.css(a,"position")?c=a.getBoundingClientRect():(b=this.offsetParent(),c=this.offset(),D(b[0],"html")||(e=b.offset()),e={top:e.top+d.css(b[0],"borderTopWidth",!0),left:e.left+d.css(b[0],"borderLeftWidth",!0)}),{top:c.top-e.top-d.css(a,"marginTop",!0),left:c.left-e.left-d.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&"static"===d.css(b,"position");)b=
b.offsetParent;return b||Da})}});d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var a="pageYOffset"===c;d.fn[b]=function(e){return da(this,function(b,e,g){var k;return d.isWindow(b)?k=b:9===b.nodeType&&(k=b.defaultView),void 0===g?k?k[c]:b[e]:void(k?k.scrollTo(a?k.pageXOffset:g,a?g:k.pageYOffset):b[e]=g)},b,e,arguments.length)}});d.each(["top","left"],function(b,c){d.cssHooks[c]=ha(S.pixelPosition,function(b,a){if(a)return a=ga(b,c),Ea.test(a)?d(b).position()[c]+"px":a})});
d.each({Height:"height",Width:"width"},function(b,c){d.each({padding:"inner"+b,content:c,"":"outer"+b},function(a,e){d.fn[e]=function(g,k){var n=arguments.length&&(a||"boolean"!=typeof g),l=a||(!0===g||!0===k?"margin":"border");return da(this,function(a,c,g){var k;return d.isWindow(a)?0===e.indexOf("outer")?a["inner"+b]:a.document.documentElement["client"+b]:9===a.nodeType?(k=a.documentElement,Math.max(a.body["scroll"+b],k["scroll"+b],a.body["offset"+b],k["offset"+b],k["client"+b])):void 0===g?d.css(a,
c,l):d.style(a,c,g,l)},c,n?g:void 0,n)}})});d.fn.extend({bind:function(b,a,d){return this.on(b,null,a,d)},unbind:function(b,a){return this.off(b,null,a)},delegate:function(b,a,d,e){return this.on(a,b,d,e)},undelegate:function(b,a,d){return 1===arguments.length?this.off(b,"**"):this.off(a,b||"**",d)}});d.holdReady=function(b){b?d.readyWait++:d.ready(!0)};d.isArray=Array.isArray;d.parseJSON=JSON.parse;d.nodeName=D;"function"==typeof define&&define.amd&&define("jquery",[],function(){return d});var xb=
h.jQuery,yb=h.$;return d.noConflict=function(b){return h.$===d&&(h.$=yb),b&&h.jQuery===d&&(h.jQuery=xb),d},a||(h.jQuery=h.$=d),d});var kUtil=kUtil||{};Math.sign||(Math.sign=function(h){return 0<h?1:0==h?0>1/h?-0:0:0>h?-1:NaN});kUtil.Matrix=function(h,a,f,t,D,aa){this.a=h;this.b=a;this.c=f;this.d=t;this.e=D;this.f=aa};kUtil.Matrix.dot=function(h,a){return new kUtil.Matrix(h.a*a.a+h.c*a.b,h.b*a.a+h.d*a.b,h.a*a.c+h.c*a.d,h.b*a.c+h.d*a.d,h.a*a.e+h.c*a.f+h.e,h.b*a.e+h.d*a.f+h.f)};
kUtil.Matrix.prototype.dot=function(h){return kUtil.Matrix.dot(this,h)};kUtil.Matrix.equals=function(h,a){return h.a==a.a&&h.b==a.b&&h.c==a.c&&h.d==a.d&&h.e==a.e&&h.f==a.f};kUtil.Matrix.prototype.equals=function(h){return kUtil.Matrix.equals(this,h)};kUtil.Matrix.prototype.inversion=function(){var h=this.a,a=this.b,f=this.c,t=this.d,D=this.e,aa=this.f,N=h*t-a*f;return new kUtil.Matrix(t/N,-a/N,-f/N,h/N,(f*aa-t*D)/N,(a*D-h*aa)/N)};
kUtil.convertURLToBlob=function(h,a){var f=new XMLHttpRequest;f.open("GET",h,!0);f.responseType="blob";f.onloadend=function(){a(this.response)};f.send()};kUtil.convertBase64ToBlob=function(h,a){for(var f=atob(h),t=Array(f.length),D=0;D<f.length;++D)t[D]=f.charCodeAt(D);f=new Uint8Array(t);return new Blob([f],{type:a})};
Date.prototype.kUtilFormat=function(h){var a={"M+":this.getUTCMonth()+1,"d+":this.getUTCDate(),"h+":this.getUTCHours(),"m+":this.getUTCMinutes(),"s+":this.getUTCSeconds(),"q+":Math.floor((this.getUTCMonth()+3)/3),S:this.getUTCMilliseconds()};/(y+)/.test(h)&&(h=h.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var f in a)(new RegExp("("+f+")")).test(h)&&(h=h.replace(RegExp.$1,1==RegExp.$1.length?a[f]:("00"+a[f]).substr((""+a[f]).length)));return h};
kUtil.copyToClipBoard=function(h){if(navigator.clipboard)navigator.clipboard.writeText(h)["catch"](function(a){alert("copy failed, info: "+(a.message||a))});else{var a=document.createElement("textarea");a.style.width="4px";a.style.height="4px";a.style.position="fixed";a.style.left="0";a.style.top="0";jQuery(document.body).append(a);a.value=h;a.focus();a.select();try{document.execCommand("copy")||alert("copy failed")}catch(f){alert("copy failed, info: "+(f.message||f))}jQuery(a).remove()}};
(function(h){h.fn.borderWidth=function(){var a;a=window.getComputedStyle?getComputedStyle(this[0]):this[0].currentStyle;var f={};f.left=parseFloat(a.getPropertyValue?a.getPropertyValue("border-left-width"):a.getAttribute("border-left-width"))||0;f.top=parseFloat(a.getPropertyValue?a.getPropertyValue("border-top-width"):a.getAttribute("border-top-width"))||0;f.right=parseFloat(a.getPropertyValue?a.getPropertyValue("border-right-width"):a.getAttribute("border-right-width"))||0;f.bottom=parseFloat(a.getPropertyValue?
a.getPropertyValue("border-bottom-width"):a.getAttribute("border-bottom-width"))||0;return f};h.fn.padding=function(){var a;a=window.getComputedStyle?getComputedStyle(this[0]):this[0].currentStyle;var f={};f.left=parseFloat(a.getPropertyValue?a.getPropertyValue("padding-left"):a.getAttribute("padding-left"))||0;f.top=parseFloat(a.getPropertyValue?a.getPropertyValue("padding-top"):a.getAttribute("padding-top"))||0;f.right=parseFloat(a.getPropertyValue?a.getPropertyValue("padding-right"):a.getAttribute("padding-right"))||
0;f.bottom=parseFloat(a.getPropertyValue?a.getPropertyValue("padding-bottom"):a.getAttribute("padding-bottom"))||0;return f};h.fn.borderBoxRect=function(){var a=null;window.getComputedStyle&&(a=getComputedStyle(this[0]));var f=this.offset(),h={};h.pageX0=f.left;h.pageY0=f.top;h.width=a?parseFloat(a.width):this.outerWidth();h.height=a?parseFloat(a.height):this.outerHeight();h.pageX1=h.pageX0+h.width;h.pageY1=h.pageY0+h.height;return h};h.fn.paddingBoxRect=function(){var a=this.borderBoxRect(),f=this.borderWidth(),
h={};h.pageX0=a.pageX0+f.left;h.pageY0=a.pageY0+f.top;h.width=window.getComputedStyle?a.width-(f.left+f.right):this.innerWidth();h.height=window.getComputedStyle?a.height-(f.top+f.bottom):this.innerHeight();h.pageX1=a.pageX1-f.right;h.pageY1=a.pageY1-f.bottom;return h};h.fn.contentBoxRect=function(){var a=this.paddingBoxRect(),f=this.padding(),h={};h.pageX0=a.pageX0+f.left;h.pageY0=a.pageY0+f.top;h.width=window.getComputedStyle?a.width-(f.left+f.right):this.width();h.height=window.getComputedStyle?
a.height-(f.top+f.bottom):this.height();h.pageX1=a.pageX1-f.right;h.pageY1=a.pageY1-f.bottom;return h};h.fn.getTransform=function(){var a=this.css("transform");if("none"==a||""==a)a=this[0].style.transform;var f="matrix(",h=a.indexOf(f);if(-1!=h){h+=f.length;a=a.substring(h,a.indexOf(")",h)).split(",");for(f=0;f<a.length;++f)a[f]=parseFloat(a[f]);return new kUtil.Matrix(a[0],a[1],a[2],a[3],a[4],a[5])}f="scale(";h=a.indexOf(f);return-1!=h?(h+=f.length,a=parseFloat(a.substring(h)),new kUtil.Matrix(a,
0,0,a,0,0)):new kUtil.Matrix(1,0,0,1,0,0)};h.fn.setTransform=function(a){a="matrix("+[a.a,a.b,a.c,a.d,a.e,a.f].join()+")";this.css("transform",a)}})(jQuery);var TaskQueue=function(){this._queue=[];this.isWorking=!1;this.timeout=100};TaskQueue.prototype.push=function(h,a,f){this._queue.push({task:h,context:a,args:f});this.isWorking||this.next()};TaskQueue.prototype.unshift=function(h,a,f){this._queue.unshift({task:h,context:a,args:f});this.isWorking||this.next()};
TaskQueue.prototype.next=function(){if(0==this._queue.length)this.isWorking=!1;else{this.isWorking=!0;var h=this._queue.shift(),a=h.task,f=h.context?h.context:self,t=h.args?h.args:[];setTimeout(function(){a.apply(f,t)},this.timeout)}};
(function(){function h(a,h){h||a.match(/^data\:([^\;]+)\;base64,/mi);a=a.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var f=atob(a),m=f.length,w=new ArrayBuffer(m),p=new Uint8Array(w),G=0;G<m;G++)p[G]=f.charCodeAt(G);return w}function a(a,h){var f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType="blob";f.onload=function(a){200!=this.status&&0!==this.status||h(this.response)};f.send()}function f(f,m){function w(a){var h=t(a),E;a:if(E=new DataView(a),255!=E.getUint8(0)||216!=E.getUint8(1))E=!1;
else{for(var C=2,w=a.byteLength;C<w;){var p=E,G=C;if(56===p.getUint8(G)&&66===p.getUint8(G+1)&&73===p.getUint8(G+2)&&77===p.getUint8(G+3)&&4===p.getUint8(G+4)&&4===p.getUint8(G+5)){p=E.getUint8(C+7);0!==p%2&&(p+=1);0===p&&(p=4);var w=C+8+p,C=E.getUint16(C+6+p),r,y;E=w;w=new DataView(a);p={};for(G=E;G<E+C;)28===w.getUint8(G)&&2===w.getUint8(G+1)&&(r=w.getUint8(G+2),r in Z&&(y=w.getInt16(G+3),r=Z[r],y=N(w,G+5,y),p.hasOwnProperty(r)?p[r]instanceof Array?p[r].push(y):p[r]=[p[r],y]:p[r]=y)),G++;E=p;break a}C++}E=
void 0}var H;a:if("DOMParser"in self)if(C=new DataView(a),255!=C.getUint8(0)||216!=C.getUint8(1))H=!1;else{w=2;p=a.byteLength;for(a=new DOMParser;w<p-4;)if("http"==N(C,w,4)){p=w-1;w=C.getUint16(w-2)-1;C=N(C,p,w);w=C.indexOf("xmpmeta>")+8;C=C.substring(C.indexOf("<x:xmpmeta"),w);w=C.indexOf("x:xmpmeta")+10;C=C.slice(0,w)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+
C.slice(w);b:{a=a.parseFromString(C,"text/xml");try{C={};if(0<a.children.length)for(w=0;w<a.children.length;w++){var U=a.children.item(w),A=U.attributes,T;for(T in A){var F=A[T],D=F.nodeName,M=F.nodeValue;void 0!==D&&(C[D]=M)}var x=U.nodeName;if("undefined"==typeof C[x])C[x]=xml2json(U);else{if("undefined"==typeof C[x].push){var g=C[x];C[x]=[];C[x].push(g)}C[x].push(xml2json(U))}}else C=a.textContent;H=C;break b}catch(e){console.log(e.message)}H=void 0}break a}else w++;H=void 0}else H=void 0;f.exifdata=
h||{};f.iptcdata=E||{};f.xmpdata=H||{};m&&m.call(f)}if(f.src)if(/^data\:/i.test(f.src)){var G=h(f.src);w(G)}else if(/^blob\:/i.test(f.src)){var r=new FileReader;r.onload=function(a){w(a.target.result)};a(f.src,function(a){r.readAsArrayBuffer(a)})}else{var p=new XMLHttpRequest;p.onload=function(){if(200==this.status||0===this.status)w(p.response);else throw"Could not load image";p=null};p.open("GET",f.src,!0);p.responseType="arraybuffer";p.send(null)}else self.FileReader&&(f instanceof self.Blob||
f instanceof self.File)&&(r=new FileReader,r.onload=function(a){w(a.target.result)},r.readAsArrayBuffer(f))}function t(a){var f=new DataView(a);if(255!=f.getUint8(0)||216!=f.getUint8(1))return!1;var h=2;a=a.byteLength;for(var m;h<a;){if(255!=f.getUint8(h))return!1;m=f.getUint8(h+1);if(225==m)return ja(f,h+4,f.getUint16(h+2)-2);h+=2+f.getUint16(h+2)}}function D(a,f,h,m,r){var w=a.getUint16(h,!r),G={},B,E,C;for(C=0;C<w;C++)B=h+12*C+2,E=m[a.getUint16(B,!r)],G[E]=aa(a,B,f,h,r);return G}function aa(a,
f,h,m,r){var p=a.getUint16(f+2,!r);m=a.getUint32(f+4,!r);h=a.getUint32(f+8,!r)+h;var w,B;switch(p){case 1:case 7:if(1==m)return a.getUint8(f+8,!r);h=4<m?h:f+8;f=[];for(p=0;p<m;p++)f[p]=a.getUint8(h+p);return f;case 2:return N(a,4<m?h:f+8,m-1);case 3:if(1==m)return a.getUint16(f+8,!r);h=2<m?h:f+8;f=[];for(p=0;p<m;p++)f[p]=a.getUint16(h+2*p,!r);return f;case 4:if(1==m)return a.getUint32(f+8,!r);f=[];for(p=0;p<m;p++)f[p]=a.getUint32(h+4*p,!r);return f;case 5:if(1==m)return w=a.getUint32(h,!r),B=a.getUint32(h+
4,!r),a=new Number(w/B),a.numerator=w,a.denominator=B,a;f=[];for(p=0;p<m;p++)w=a.getUint32(h+8*p,!r),B=a.getUint32(h+4+8*p,!r),f[p]=new Number(w/B),f[p].numerator=w,f[p].denominator=B;return f;case 9:if(1==m)return a.getInt32(f+8,!r);f=[];for(p=0;p<m;p++)f[p]=a.getInt32(h+4*p,!r);return f;case 10:if(1==m)return a.getInt32(h,!r)/a.getInt32(h+4,!r);f=[];for(p=0;p<m;p++)f[p]=a.getInt32(h+8*p,!r)/a.getInt32(h+4+8*p,!r);return f}}function N(a,f,h){for(var m="",r=f;r<f+h;r++)m+=String.fromCharCode(a.getUint8(r));
return m}function ja(a,f){if("Exif"!=N(a,f,4))return!1;var h,m,w,p,t=f+6;if(18761==a.getUint16(t))h=!1;else if(19789==a.getUint16(t))h=!0;else return!1;if(42!=a.getUint16(t+2,!h))return!1;var B=a.getUint32(t+4,!h);if(8>B)return!1;m=D(a,t,t+B,r,h);if(m.ExifIFDPointer)for(w in p=D(a,t,t+m.ExifIFDPointer,y,h),p){switch(w){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":p[w]=
K[w][p[w]];break;case "ExifVersion":case "FlashpixVersion":p[w]=String.fromCharCode(p[w][0],p[w][1],p[w][2],p[w][3]);break;case "ComponentsConfiguration":p[w]=K.Components[p[w][0]]+K.Components[p[w][1]]+K.Components[p[w][2]]+K.Components[p[w][3]]}m[w]=p[w]}if(m.GPSInfoIFDPointer)for(w in p=D(a,t,t+m.GPSInfoIFDPointer,J,h),p){switch(w){case "GPSVersionID":p[w]=p[w][0]+"."+p[w][1]+"."+p[w][2]+"."+p[w][3]}m[w]=p[w]}B=t+B;w=a.getUint16(B,!h);if(B=a.getUint32(B+2+12*w,!h))if(B>a.byteLength)t={};else{B=
D(a,t,t+B,F,h);if(B.Compression)switch(B.Compression){case 6:B.JpegIFOffset&&B.JpegIFByteCount&&(B.blob=new Blob([new Uint8Array(a.buffer,t+B.JpegIFOffset,B.JpegIFByteCount)],{type:"image/jpeg"}));break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",B.Compression)}else 2==B.PhotometricInterpretation&&console.log("Thumbnail image format is RGB, which is not implemented.");t=B}else t={};m.thumbnail=t;return m}
var A=self,m=function(a){if(a instanceof m)return a;if(!(this instanceof m))return new m(a);this.EXIFwrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=m),exports.EXIF=m):A.EXIF=m;var y=m.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",
36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",
41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",
42016:"ImageUniqueID"},r=m.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",
301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},J=m.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",
16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},F=m.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",
278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},K=m.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",
2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",
24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",
32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",
95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},
GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},Z={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",
105:"headline",116:"copyright",15:"category"};m.getData=function(a,h){if((self.Image&&a instanceof self.Image||self.HTMLImageElement&&a instanceof self.HTMLImageElement)&&!a.complete)return!1;a.exifdata?h&&h.call(a):f(a,h);return!0};m.getTag=function(a,f){if(a.exifdata)return a.exifdata[f]};m.getIptcTag=function(a,f){if(a.exifdata)return a.iptcdata[f]};m.getAllTags=function(a){if(!a.exifdata)return{};var f;a=a.exifdata;var h={};for(f in a)a.hasOwnProperty(f)&&(h[f]=a[f]);return h};m.getAllIptcTags=
function(a){if(!a.exifdata)return{};var f;a=a.iptcdata;var h={};for(f in a)a.hasOwnProperty(f)&&(h[f]=a[f]);return h};m.pretty=function(a){if(!a.exifdata)return"";var f;a=a.exifdata;var h="";for(f in a)a.hasOwnProperty(f)&&(h="object"==typeof a[f]?a[f]instanceof Number?h+(f+" : "+a[f]+" ["+a[f].numerator+"/"+a[f].denominator+"]\r\n"):h+(f+" : ["+a[f].length+" values]\r\n"):h+(f+" : "+a[f]+"\r\n"));return h};m.readFromBinaryFile=function(a){return t(a)};"function"===typeof define&&define.amd&&define("exif-js",
[],function(){return m})}).call(this);
(function(h){function a(){for(var a=0;a<p.length;a++)p[a][0](p[a][1]);p=[];ka=!1}function f(f,h){p.push([f,h]);ka||(ka=!0,H(a,0))}function t(a,f){function h(a){N(f,a)}function m(a){A(f,a)}try{a(h,m)}catch(ba){m(ba)}}function D(a){var f=a.owner,h=f.state_,f=f.data_,m=a[h];a=a.then;if("function"===typeof m){h=G;try{f=m(f)}catch(ba){A(a,ba)}}aa(a,f)||(h===G&&N(a,f),h===U&&A(a,f))}function aa(a,f){var h;try{if(a===f)throw new TypeError("A promises callback cannot return that same promise.");if(f&&("function"===
typeof f||"object"===typeof f)){var m=f.then;if("function"===typeof m)return m.call(f,function(m){h||(h=!0,f!==m?N(a,m):ja(a,m))},function(f){h||(h=!0,A(a,f))}),!0}}catch(ba){return h||A(a,ba),!0}return!1}function N(a,f){a!==f&&aa(a,f)||ja(a,f)}function ja(a,h){a.state_===Z&&(a.state_=w,a.data_=h,f(y,a))}function A(a,h){a.state_===Z&&(a.state_=w,a.data_=h,f(r,a))}function m(a){var f=a.then_;a.then_=void 0;for(a=0;a<f.length;a++)D(f[a])}function y(a){a.state_=G;m(a)}function r(a){a.state_=U;m(a)}function J(a){if("function"!==
typeof a)throw new TypeError("Promise constructor takes a function argument");if(!1===this instanceof J)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[];t(a,this)}var F=h.Promise,K=F&&"resolve"in F&&"reject"in F&&"all"in F&&"race"in F&&function(){var a;new F(function(f){a=f});return"function"===typeof a}();"undefined"!==typeof exports&&exports?(exports.Promise=K?F:J,exports.Polyfill=J):"function"==
typeof define&&define.amd?define(function(){return K?F:J}):K||(h.Promise=J);var Z="pending",w="sealed",G="fulfilled",U="rejected",T=function(){},H="undefined"!==typeof setImmediate?setImmediate:setTimeout,p=[],ka;J.prototype={constructor:J,state_:Z,then_:null,data_:void 0,then:function(a,h){var m={owner:this,then:new this.constructor(T),fulfilled:a,rejected:h};this.state_===G||this.state_===U?f(D,m):this.then_.push(m);return m.then},"catch":function(a){return this.then(null,a)}};J.all=function(a){if("[object Array]"!==
Object.prototype.toString.call(a))throw new TypeError("You must pass an array to Promise.all().");return new this(function(f,h){function m(a){r++;return function(h){E[a]=h;--r||f(E)}}for(var E=[],r=0,p=0,B;p<a.length;p++)(B=a[p])&&"function"===typeof B.then?B.then(m(p),h):E[p]=B;r||f(E)})};J.race=function(a){if("[object Array]"!==Object.prototype.toString.call(a))throw new TypeError("You must pass an array to Promise.race().");return new this(function(f,h){for(var m=0,p;m<a.length;m++)(p=a[m])&&"function"===
typeof p.then?p.then(f,h):f(p)})};J.resolve=function(a){return a&&"object"===typeof a&&a.constructor===this?a:new this(function(f){f(a)})};J.reject=function(a){return new this(function(f,h){h(a)})}})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
var KPainter=function(h){var a=this;h=h||{};KPainter.xxx="mouse"==h.gesturer?!1:"touch"==h.gesturer?!0:"ontouchend"in document?!0:!1;var f=jQuery,t=function(a,f,h){return new Promise(function(m){if(a.toBlob)a.toBlob(function(a){m(a)},f,h);else{var p=a.toDataURL(f,h),p=kUtil.convertBase64ToBlob(p.substring(p.indexOf(",")+1),f);m(p)}})},D=function(a,f,h){f=f||new kUtil.Matrix(1,0,0,1,0,0);var m=document.createElement("canvas"),p=!1;0!=f.a*f.d&&0==f.b*f.c?(m.width=a.naturalWidth||a.width,m.height=a.naturalHeight||
a.height):(p=!0,m.width=a.naturalHeight||a.height,m.height=a.naturalWidth||a.width);if(m.width>h||m.height>h)h/=Math.max(m.width,m.height),m.width=Math.min(m.width*h),m.height=Math.min(m.height*h);h=m.getContext("2d");h.setTransform(f.a,f.b,f.c,f.d,f.e*m.width,f.f*m.height);p?h.drawImage(a,0,0,m.height,m.width):h.drawImage(a,0,0,m.width,m.height);return m},aa=function(a,f,h){return new Promise(function(m){var p=function(){var p=URL.createObjectURL(a),r=new Image;r.onload=r.onerror=function(){r.onload=
r.onerror=null;var a=D(r,f,h);URL.revokeObjectURL(p);m(a)};r.src=p};window.createImageBitmap?createImageBitmap(a).then(function(a){m(D(a,f,h))})["catch"](function(){p()}):p()})},N=KPainter._doCallbackNoBreak,ja=f('<div style="width:800px;height:600px;border:1px solid #ccc;"><div class="kPainterBox"><div class="kPainterImgsDiv"><canvas class="kPainterCanvas" style="display:none;left:0;top:0;"></canvas></div><div class="kPainterCroper" style="width:50px;height:50px;display:none;"><div class="kPainterCells"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div><div class="kPainterBigMover" data-orient="0,0" style="display:none"></div><div class="kPainterEdges"><div data-orient="-1,0"></div><div data-orient="0,-1"></div><div data-orient="1,0"></div><div data-orient="0,1"></div></div><div class="kPainterCorners"><div data-orient="-1,-1"><i></i></div><div data-orient="1,-1"><i></i></div><div data-orient="1,1"><i></i></div><div data-orient="-1,1"><i></i></div></div><div class="kPainterMover" data-orient="0,0"><div></div><svg width="20" height="20" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 896q0 26-19 45l-256 256q-19 19-45 19t-45-19-19-45v-128h-384v384h128q26 0 45 19t19 45-19 45l-256 256q-19 19-45 19t-45-19l-256-256q-19-19-19-45t19-45 45-19h128v-384h-384v128q0 26-19 45t-45 19-45-19l-256-256q-19-19-19-45t19-45l256-256q19-19 45-19t45 19 19 45v128h384v-384h-128q-26 0-45-19t-19-45 19-45l256-256q19-19 45-19t45 19l256 256q19 19 19 45t-19 45-45 19h-128v384h384v-128q0-26 19-45t45-19 45 19l256 256q19 19 19 45z" fill="#fff"/></svg></div></div><div class="kPainterPerspect" style="display:none;"><canvas class="kPainterPerspectCvs"></canvas><div class="kPainterPerspectCorner" data-index="0">lt</div><div class="kPainterPerspectCorner" data-index="1">rt</div><div class="kPainterPerspectCorner" data-index="2">rb</div><div class="kPainterPerspectCorner" data-index="3">lb</div></div><div class="kPainterGesturePanel"></div></div></div>')[0],
A=f(ja).children(),m=A.find("> .kPainterImgsDiv > .kPainterCanvas")[0];a.getHtmlElement=function(){return ja};var y=-1,r=[],J=null,F=null,K=!1,Z="view";a.getCurIndex=function(){return y};a.getCount=function(){return r.length};a.isEditing=function(){return K};a.getMode=function(){return Z};a.getImage=function(a,h){void 0==h&&(h=y);if(!(isNaN(h)||(h=Math.round(h),0>h||h>=r.length))){var m;a?m=r[h]:(m=f(r[h]).clone()[0],m.setAttribute("style",""));return m}};a.onStartLoading=null;a.onFinishLoading=null;
var w=function(){N(a.onStartLoading)},G=function(){N(a.onFinishLoading)},U=new function(){a.defaultFileInput=f('<input type="file" accept="image/bmp,image/gif,image/jpeg,image/png,image/webp" multiple style="display:none">')[0];a.beforeAddImgFromFileChooseWindow=null;a.afterAddImgFromFileChooseWindow=null;f(a.defaultFileInput).change(function(g){var e=this;g=g.originalEvent;var k=function(g){m(g).then(function(g){N(a.afterAddImgFromFileChooseWindow,[!0,g]);e.value=""},function(g){N(a.afterAddImgFromFileChooseWindow,
[!1,g]);e.value=""})};a.beforeAddImgFromFileChooseWindow?N(a.beforeAddImgFromFileChooseWindow,[g,function(a){k(a)}]):k(e.files)});a.showFileChooseWindow=function(){if(K)return!1;a.defaultFileInput.click();return!0};a.beforeAddImgFromDropFile=null;a.afterAddImgFromDropFile=null;A.on("dragover",function(a){a=a.originalEvent;a.stopPropagation();a.preventDefault()});A.on("drop",function(g){g=g.originalEvent;g.stopPropagation();g.preventDefault();var e=function(e){m(e).then(function(e){N(a.afterAddImgFromDropFile,
[!0,e])},function(e){N(a.afterAddImgFromDropFile,[!1,e])})};a.beforeAddImgFromDropFile?N(a.beforeAddImgFromDropFile,[g,function(a){e(a)}]):e(g.dataTransfer.files)});var h=new TaskQueue,m=a.addImage=function(a){return new Promise(function(e,g){if(K)return g(Error("`addImage(imgData)`: The function is only valid in `view` mode."));if(!(a instanceof Blob||a instanceof HTMLCanvasElement||"string"==typeof a||a instanceof String||a instanceof HTMLImageElement)){if(a instanceof Array||a instanceof FileList){for(var k=
[],f=!1,l=0;l<a.length;++l)m(a[l]).then(function(g){k.push(g);f=!0;k.length==a.length&&e(k)},function(n){k.push(n);k.length==a.length&&(f?e(k):(Error("`addImage(imgData)`: No img added in this array. Get more info in `<this error object>.addImgErrArr`.").addImgErrArr=k,g(Error("`addImage(imgData)`: No img added in this array."))))});return}return g(Error("`addImage(imgData)`: Type of `imgData` should be `Blob`, `HTMLCanvasElement`, `HTMLImageElement`, `String(url)`, `Array(a array of source)`, `FileList`."))}w();
h.push(R,null,[a,function(a){a instanceof Error?g(Error("`addImage(imgData)`: "+a)):e(a);h.next();h.isWorking||G()}])})},p=function(a,e){"image/jpeg"!=a.type?e(null):EXIF.getData(a,function(){var a=null;switch(EXIF.getTag(this,"Orientation")){case 6:a=new kUtil.Matrix(0,1,-1,0,1,0);break;case 3:a=new kUtil.Matrix(-1,0,0,-1,1,1);break;case 8:a=new kUtil.Matrix(0,-1,1,0,0,1)}e(a)})},F=function(a,e){var g=a.slice(25,26),f=new FileReader;f.onload=function(){var a=(new Int8Array(f.result))[0];e(4==(a&
4))};f.readAsArrayBuffer(g)},J=function(a,e){var g=a.type;-1!=g.indexOf("webp")?e&&e("image/webp"):-1!=g.indexOf("gif")||-1!=g.indexOf("svg")?e&&e("image/png"):-1!=g.indexOf("png")?F(a,function(a){e&&e(a?"image/png":"image/jpeg")}):e&&e("image/jpeg")},R=function(a,e){ga(a,function(a,g){a instanceof Blob?N(function(){H(a,g,e)}):e(a)})},ga=this.getBlobAndFormatFromAnyImgData=function(a,e){var g=function(a){J(a,function(g){p(a,function(k){ha(a,k,g,function(a){e(a,g)})})})};if(a instanceof Blob)g(a);
else if(a instanceof HTMLCanvasElement)t(a).then(g);else if("string"==typeof a||a instanceof String)if("data:"==a.substring(0,5)){var f="";"image/"==a.substring(5,11)&&(f=a.substring(5,a.indexOf(";",11)));f=kUtil.convertBase64ToBlob(a.substring(a.indexOf("base64,")+7),f);g(f)}else kUtil.convertURLToBlob(a,function(a){a?g(a):e("Network error.")});else if(a instanceof HTMLImageElement)if(a.crossOrigin&&"anonymous"!=a.crossOrigin)e("Cors error.");else{var h=a.src;ga(h,function(k,f){if(k instanceof Blob)e(k,
f);else{var n=document.createElement("canvas");n.width=a.naturalWidth;n.height=a.naturalHeight;n.getContext("2d").drawImage(a,0,0);var l="",m=h.lastIndexOf("?"),v;-1!=m?(v=h.lastIndexOf(".",m),-1!=v&&5>=m-v&&(l=h.substring(v+1,m))):(v=h.lastIndexOf("."),-1!=v&&(l=5>=h.length-v?h.substring(v+1):h.substring(v+1,v+5)));l=-1!=l.indexOf("webp")?"image/webp":-1!=l.indexOf("png")||-1!=l.indexOf("gif")||-1!=l.indexOf("svg")?"image/png":"image/jpeg";t(n,l).then(g)}})}else e("Type of `imgData` not support.")};
a.addedImageMaxWH=4096;var ha=function(a,e,k,f){e?aa(a,e).then(function(a){t(a,k).then(function(a){f&&f(a)})}):f&&f(a)};a.isShowNewImgWhenAdd=!0;var H=function(g,e,k){var h=new Image;h.kPainterOriBlob=h.kPainterBlob=g;h.kPainterSaveFormat=e;var m=URL.createObjectURL(h.kPainterBlob);h.onload=h.onerror=function(){a._noAnyUseButForIosSafariBug0=h.naturalWidth;a._noAnyUseButForIosSafariBug1=h.naturalHeight;h.kPainterWidth=h.naturalWidth;h.kPainterHeight=h.naturalHeight;h.kPainterOriWidth=h.kPainterWidth;
h.kPainterOriHeight=h.kPainterHeight;if(h.kPainterWidth>a.addedImageMaxWH||h.kPainterHeight>a.addedImageMaxWH)t(D(h,null,a.addedImageMaxWH),e).then(function(a){URL.revokeObjectURL(m);h.kPainterOriBlob=h.kPainterBlob=a;m=URL.createObjectURL(h.kPainterBlob);h.src=m});else{h.onload=h.onerror=null;(a.isShowNewImgWhenAdd||-1==y)&&P(r.length-1);try{(function(){for(var a=0;a<l.length;++a){var e=l[a].cvs,g=l[a].mwh,g=Math.min(g/h.naturalWidth,g/h.naturalHeight,1);e.width=Math.round(h.naturalWidth*g);e.height=
Math.round(h.naturalHeight*g);e.getContext("2d").drawImage(h,0,0,e.width,e.height)}})()}catch(z){setTimeout(function(){throw z;},0)}k&&k(r.length-1)}};h.src=m;f(h).hide();A.children(".kPainterImgsDiv").append(h);r.push(h);var l=[];try{(function(){for(var a=0;a<x.length;++a){var e=x[a],g=e.kPainterFunWrap,k=document.createElement("canvas");k.className="kPainterThumbnailCanvas";l.push({cvs:k,mwh:e.kPainterMaxWH});var f=null;try{f=g?g(k):k}catch(S){setTimeout(function(){throw S;},0);break}f&&(f.getKPainterIndex=
function(){return e.kPainterThumbBoxArr.indexOf(this)},e.kPainterThumbBoxArr.push(f),e.appendChild(f))}})()}catch(z){setTimeout(function(){throw z;},0)}},U=function(){var g=r[y],e=A;e.paddingBoxRect();var e=e.contentBoxRect(),k=g.kPainterZoom=Math.min(e.width/g.kPainterWidth,e.height/g.kPainterHeight);g.style.width=(Math.round(g.kPainterWidth*k)||1)+"px";g.style.height=(Math.round(g.kPainterHeight*k)||1)+"px";g.style.left=g.style.right=g.style.top=g.style.bottom="-100000px";if(2<=r.length){var f=
r[(r.length+y-1)%r.length],k=Math.min(e.width/f.kPainterWidth,e.height/f.kPainterHeight);f.style.width=(Math.round(f.kPainterWidth*k)||1)+"px";f.style.height=(Math.round(f.kPainterHeight*k)||1)+"px";f.style.right="100000px";f.style.left=f.style.top=f.style.bottom="-100000px"}3<=r.length&&(g=r[(r.length+y+1)%r.length],k=Math.min(e.width/g.kPainterWidth,e.height/g.kPainterHeight),g.style.width=(Math.round(g.kPainterWidth*k)||1)+"px",g.style.height=(Math.round(g.kPainterHeight*k)||1)+"px",g.style.left=
"100000px",g.style.right=g.style.top=f.style.bottom="-100000px");N(a.onUpdateImgPosZoom)},X=null,Y=null,O;a.updateUIOnResize=function(g){null!=X&&(clearTimeout(X),X=null,Y());return g?new Promise(function(e,g){O=K;X=setTimeout(function(){if(-1!=y&&O==K)if(K){var g=a.getFreeTransformCornerPos();T.setImgStyleFit();a.setFreeTransformCornerPos(g)}else U();X=null;e()},500);Y=g}):-1!=y?(K?(g=a.getFreeTransformCornerPos(),T.setImgStyleFit(),a.setFreeTransformCornerPos(g)):U(),!0):!1};var P=this.showImg=
function(g){var e=r[g];f(e).siblings().hide();y=g;f(e).show();2<=r.length&&(0<g||a.allowedTouchMoveSwitchImgOverBoundary)&&f(r[(r.length+g-1)%r.length]).show();3<=r.length&&(g<r.length-1||a.allowedTouchMoveSwitchImgOverBoundary)&&f(r[(r.length+g+1)%r.length]).show();U();M()};a.onNumChange=null;var M=function(){var g=void 0,e=void 0;return function(){if(g!=y||e!=r.length)g=y,e=r.length,N(a.onNumChange,[y,r.length])}}();a.changePage=function(a){if(K)return!1;var e;switch(a){case "f":e=0;break;case "p":e=
y-1;break;case "n":e=y+1;break;case "l":e=r.length-1;break;default:if(1>arguments.length||isNaN(a))return!1;e=Math.round(a)}if(0>e||e>=r.length||e==y)return!1;P(e);return!0};a.movePage=function(){if(K)return!1;var a,e;1==arguments.length?e=arguments[0]:2<=arguments.length&&(a=arguments[0],e=arguments[1]);void 0==a&&(a=y);if(isNaN(e))return!1;e=Math.round(e);if(0>e||e>r.length||isNaN(a))return!1;a=Math.round(a);if(0>a||a>=r.length)return!1;if(a==e)return!0;var k=r.splice(a,1)[0];e>a?r.splice(e-1,0,
k):r.splice(e,0,k);a==y?y=e>a?e-1:e:a<y&&e>y?--y:a>y&&e<y&&++y;M();try{for(k=0;k<x.length;++k){var h=x[k],m=h.kPainterThumbBoxArr[a];h.kPainterThumbBoxArr.length==e?f(h).append(m):f(h.kPainterThumbBoxArr[e]).before(m);h.kPainterThumbBoxArr.splice(a,1);e>a?h.kPainterThumbBoxArr.splice(e-1,0,m):h.kPainterThumbBoxArr.splice(e,0,m)}}catch(l){setTimeout(function(){throw l;},0)}return!0};a.del=function(a){if(K)return!1;1>arguments.length&&(a=y);if(isNaN(a))return!1;a=Math.round(a);if(0>a||a>=r.length)return!1;
URL.revokeObjectURL(r[a].src);f(r[a]).remove();r.splice(a,1);try{for(var e=0;e<x.length;++e){var g=x[e];f(g.kPainterThumbBoxArr[a]).remove();g.kPainterThumbBoxArr.splice(a,1)}}catch(n){setTimeout(function(){throw n;},0)}a<y?(--y,M()):a==y?(y==r.length&&--y,0<=y?P(y):M()):M();return!0};a.getWidth=function(a){1>arguments.length&&(a=y);if(isNaN(a))return NaN;a=Math.round(a);return 0>a||a>=r.length?NaN:r[a].kPainterWidth};a.getHeight=function(a){1>arguments.length&&(a=y);if(isNaN(a))return NaN;a=Math.round(a);
return 0>a||a>=r.length?NaN:r[a].kPainterHeight};a.getBlob=function(a){1>arguments.length&&(a=y);if(isNaN(a))return null;a=Math.round(a);return 0>a||a>=r.length?null:r[a].kPainterBlob};a.download=function(a,e){2>arguments.length&&(e=y);if(isNaN(e))return null;e=Math.round(e);if(0>e||e>=r.length)return null;var g=document.createElement("a");g.target="_blank";var f=r[e].kPainterBlob;if(!a){var h="";f.type&&(h=f.type.substring(f.type.indexOf("/")+1));h="jpeg"==h?".jpg":"."+h;a=(new Date).getTime()+h}g.download=
a;var l=URL.createObjectURL(f);g.href=l;f=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});g.dispatchEvent(f);setTimeout(function(){URL.revokeObjectURL(l)},1E4);return a};var x=this.thumbnailBoxArr=[];a.bindThumbnailBox=function(g,e,k){if(K||!(g instanceof HTMLElement))return!1;a.unbindThumbnailBox(g);g.innerHTML="";g.kPainterFunWrap=e;g.kPainterMaxWH=k||256;g.kPainterThumbBoxArr=[];for(k=0;k<r.length;++k){var f=r[k];a._noAnyUseButForIosSafariBug0=f.naturalWidth;a._noAnyUseButForIosSafariBug1=
f.naturalHeight;var h=Math.min(g.kPainterMaxWH/f.naturalWidth,g.kPainterMaxWH/f.naturalHeight,1),l=document.createElement("canvas");l.width=Math.round(f.naturalWidth*h);l.height=Math.round(f.naturalHeight*h);l.getContext("2d").drawImage(f,0,0,l.width,l.height);l.className="kPainterThumbnailCanvas";f=null;try{f=e?e(l):l}catch(z){return setTimeout(function(){throw z;},0),!1}f&&(f.getKPainterIndex=function(){return g.kPainterThumbBoxArr.indexOf(this)},g.kPainterThumbBoxArr.push(f),g.appendChild(f))}x.push(g);
return!0};a.unbindThumbnailBox=function(a){if(K)return!1;if(a){for(var e=0;e<x.length;++e)if(x[e]==a)return a.innerHTML="",a.kPainterFunWrap=void 0,a.kPainterThumbBoxArr=void 0,x.splice(e,1),!0;return!1}for(e=0;e<x.length;++e)a=x[e],a.innerHTML="",a.kPainterFunWrap=void 0,a.kPainterThumbBoxArr=void 0;x.length=0;return!0}};(function(a){a=a.length?a[0]:function(a){var f=a.indexOf(".");return[a.substring(f,f+32),a.substring(0,8)]}(location.host);for(var f=null,h=0;h<a.length;++h){for(var m=1,p=a[h],
r=0;r<p.length;++r)m*=p.charCodeAt(r),m+=p.charCodeAt((r+1)%p.length),m%=11003;if(1!=m&&7480!=m&&5095!=m&&3124!=m&&8633!=m&&3122!=m)f=setTimeout(function(){N=function(){}},1E5*(1+2*Math.random()));else{null!==f&&clearTimeout(f);break}}})(arguments);var T=new function(){var h=Number.NEGATIVE_INFINITY,E;a.leftDoubleClickZoomRate=2;a.rightDoubleClickZoomRate=.5;var t,w,D,R,G,H,ca,T,X,Y,O,P,M,x,g,e,k,n,v,l,z,ia;a.allowedTouchMoveSwitchImgOverBoundary=!0;var la=function(){if(-1!=y&&"posZoom"==J){J=F=null;
A.find("> .kPainterCroper > .kPainterEdges").children().css("z-index",1);A.find("> .kPainterCroper > .kPainterCorners").children().css("z-index",1);A.find("> .kPainterCroper > .kPainterMover").css("z-index",1);A.find("> .kPainterCroper > .kPainterBigMover").css("z-index",1);if(!K&&1!=r.length){var d=!1,g,f;1.2>l/z&&(d=!0,g=Math.sqrt(Math.pow(G-t,2)+Math.pow(H-w,2)),f=g/(((new Date).getTime()-h)/1E3));if(n<-(Math.round(e*l)||1)/2||d&&-50>g&&-200>f){if(y+1<r.length||a.allowedTouchMoveSwitchImgOverBoundary){U.showImg((r.length+
y+1)%r.length);return}}else if(n>(Math.round(e*l)||1)/2||d&&50<g&&200<f)if(0<=y-1||a.allowedTouchMoveSwitchImgOverBoundary){U.showImg((r.length+y-1)%r.length);return}}S();ma()}},L=function(a){var d=A;K?(x=m,e=x.width,k=x.height):(x=r[y],e=x.kPainterWidth,k=x.kPainterHeight);n=parseFloat(x.style.left)+1E5;v=parseFloat(x.style.top)+1E5;g=f(x).getTransform();if(0==g.a*g.d||0!=g.b*g.c){var h=e;e=k;k=h}l=x.kPainterZoom||1;P=d.paddingBoxRect();M=d.contentBoxRect();z=Math.min(M.width/e,M.height/k);K&&p.isCropRectShowing&&
!a&&(a=p.getNeededRect(),z=Math.max(Math.max(a.width,e*z)/e,Math.max(a.height,k*z)/k))};a.onUpdateImgPosZoom=null;var ma=function(){x.style.left=n-1E5+"px";x.style.right=-n-1E5+"px";x.style.top=v-1E5+"px";x.style.bottom=-v-1E5+"px";x.kPainterZoom=l;0!=g.a*g.d&&0==g.b*g.c?(x.style.width=(Math.round(e*l)||1)+"px",x.style.height=(Math.round(k*l)||1)+"px"):(x.style.height=(Math.round(e*l)||1)+"px",x.style.width=(Math.round(k*l)||1)+"px");if(!K&&1!=r.length){var d=Math.max(0,((Math.round(e*l)||1)-P.width)/
2);if(2<r.length||n>d){var f=r[(r.length+y-1)%r.length];f.style.left=n-d-P.width+"px";f.style.right=-n+d+P.width+"px"}if(2<r.length||n<=-d)f=r[(r.length+y+1)%r.length],f.style.left=n+d+P.width+"px",f.style.right=-n-d-P.width+"px"}N(a.onUpdateImgPosZoom)},S=function(a,g){4<l&&(l=4);l<z&&(l=z);if(!a){var d=Math.round(e*l)||1;M.width>d?n=0:(d=(d-M.width)/2,n<-d?n=-d:n>d&&(n=d))}g||(d=Math.round(k*l)||1,M.height>d?v=0:(d=(d-M.height)/2,v<-d?v=-d:v>d&&(v=d)))};a.getZoom=function(){if(0!=r.length)return L(),
l};a.setZoom=function(a,e){if(0==r.length)return null;a=parseFloat(a);if(a!==a)return null;L();l=e?l*a:a;S();ma();return l};this.setImgStyleFit=function(){L(!0);l=z;S();ma();a.setCropRectArea()};A.on("touchstart touchcancel touchend mousedown",function(d){d.preventDefault();if(-1!=y){var e=d.originalEvent;d=e.targetTouches;var g;if(!d){if(!F)F="mouse";else if("mouse"!=F)return;d=[{pageX:e.clientX,pageY:e.clientY}];g=e.buttons}else if(d.length)if(!F)F="touch";else if("touch"!=F)return;if(1==d.length){G=
t=d[0].pageX;H=w=d[0].pageY;L();e=h;h=(new Date).getTime();var f=E;E=g||(.01>Math.abs(l-z)/z?1:2);if(1E3>h-e&&E==f&&(1==E||2==E)&&8>Math.abs(d[0].pageX-D)&&8>Math.abs(d[0].pageY-R)){h=Number.NEGATIVE_INFINITY;g=G;var e=H,k=l,f=1==E?a.leftDoubleClickZoomRate:a.rightDoubleClickZoomRate;l*=f;4<l&&(l=4,f=4/k);l<z&&(l=z,f=z/k);k=v+P.pageY0+P.height/2;n-=(f-1)*(g-(n+P.pageX0+P.width/2));v-=(f-1)*(e-k);S()}null==J&&(J="posZoom",A.find("> .kPainterCroper > .kPainterEdges").children().css("z-index","unset"),
A.find("> .kPainterCroper > .kPainterCorners").children().css("z-index","unset"),A.find("> .kPainterCroper > .kPainterMover").css("z-index","unset"),A.find("> .kPainterCroper > .kPainterBigMover").css("z-index","unset"),ia=d[0].identifier)}else 2==d.length?(G=t=d[0].pageX,H=w=d[0].pageY,null==J&&(J="posZoom"),"posZoom"==J&&(L(),A.find("> .kPainterCroper > .kPainterEdges").children().css("z-index","unset"),A.find("> .kPainterCroper > .kPainterCorners").children().css("z-index","unset"),A.find("> .kPainterCroper > .kPainterMover").css("z-index",
"unset"),A.find("> .kPainterCroper > .kPainterBigMover").css("z-index","unset"),X=d[1].pageX,Y=d[1].pageY,ca=(G+X)/2,T=(H+Y)/2,O=Math.sqrt(Math.pow(G-X,2)+Math.pow(H-Y,2)))):0==d.length&&(D=G,R=H,la())}});A.on("mouseup",function(a){"mouse"==F&&(a=a.originalEvent,D=a.clientX,R=a.clientY,la())});A.on("mouseleave",function(a){"mouse"==F&&a.originalEvent.buttons&&(D=G,R=H,la())});A.on("contextmenu",function(a){a.preventDefault()});A.on("touchmove mousemove",function(a){a.preventDefault();var d=a.originalEvent.targetTouches;
if(!d){if("mouse"!=F)return;d=[{pageX:a.originalEvent.clientX,pageY:a.originalEvent.clientY}]}else if("touch"!=F)return;if(1==d.length){if("posZoom"==J&&ia==d[0].identifier){a=G;var e=H;G=d[0].pageX;H=d[0].pageY;n+=G-a;v+=H-e;S(!K);ma()}}else if(2==d.length&&"posZoom"==J){a=ca;var e=T,g=O,f=l;G=d[0].pageX;H=d[0].pageY;X=d[1].pageX;Y=d[1].pageY;ca=(G+X)/2;T=(H+Y)/2;O=Math.sqrt(Math.pow(G-X,2)+Math.pow(H-Y,2));d=O/g;l*=d;4<l&&(l=4,d=4/f);l<z&&(l=z,d=z/f);f=v+P.pageY0+P.height/2;n-=(d-1)*(a-(n+P.pageX0+
P.width/2));v-=(d-1)*(e-f);S();ma()}})},H=new function(){var h=this,E,C=[];a.stepImgsGCThreshold=10;var D=[],H=[];a.addProtectedStep=function(a){if(!K)return!1;a=parseInt(a);if(a!==a)return!1;if(-1!=H.indexOf(a))return!0;H.push(a);H.sort(function(a,g){return a-g});return!0};a.removeProtectedStep=function(a){if(!K)return!1;a=parseInt(a);if(a!==a)return!1;a=H.indexOf(a);if(-1==a)return!1;H.splice(a,1);return!0};a.getProtectedSteps=function(){return K?H.concat():null};var R=h.pushStack=function(f){C.length=
E+1;for(var h=D.length-1;0<h;--h)if(D[h].beginStep>E)--D.length;else break;var g;if(f.srcBlob){g={crop:{left:0,top:0,width:1,height:1},transform:new kUtil.Matrix(1,0,0,1,0,0),srcBlob:f.srcBlob,saveFormat:f.saveFormat};for(h=0;D.length>=a.stepImgsGCThreshold;)if(H.filter(function(a){return D[h].beginStep<=a&&a<D[h].endStep}).length){if(!(++h<D.length))break}else{f=D[h].endStep;for(var e=D[h].beginStep;e<f;++e)C[e]=null;D.splice(h,1)}C.push(g);++E;D.push({blob:g.srcBlob,beginStep:E,endStep:E+1})}else{g=
C[E];var k=g.crop,n=f.transform,m=f.crop,e={};f=n?n:g.transform;e.left=k.left;e.top=k.top;e.width=k.width;e.height=k.height;0!=f.a*f.d&&0==f.b*f.c?(n&&(f=new kUtil.Matrix(Math.sign(n.a),0,0,Math.sign(n.d),0,0)),m&&(e.left=1==f.a?e.left+m.left*k.width:e.left+(1-m.left-m.width)*k.width,e.top=1==f.d?e.top+m.top*k.height:e.top+(1-m.top-m.height)*k.height,e.width*=m.width,e.height*=m.height)):(n&&(f=new kUtil.Matrix(0,Math.sign(n.b),Math.sign(n.c),0,0,0)),m&&(e.left=1==f.b?e.left+m.top*k.width:e.left+
(1-m.top-m.height)*k.width,e.top=1==f.c?e.top+m.left*k.height:e.top+(1-m.left-m.width)*k.height,e.width*=m.height,e.height*=m.width));k=r[y];k=Math.pow(10,Math.ceil(Math.max(k.kPainterWidth,k.kPainterHeight)).toString().length+2);e.left=Math.round(e.left*k)/k;e.top=Math.round(e.top*k)/k;e.width=Math.round(e.width*k)/k;e.height=Math.round(e.height*k)/k;g={crop:e,transform:f,srcBlob:g.srcBlob,saveFormat:g.saveFormat};C.push(g);++E;g.srcBlob&&(D[D.length-1].endStep=E+1)}};a.undo=function(){return new Promise(function(a,
f){if(!K)return f(Error("`undo()`: The function is invalid in current mode."));if(0<E){for(var g=E-1;null==C[g];)--g;N(E,g,function(){return a()})}})};a.redo=function(){return new Promise(function(a,f){if(!K)return f(Error("`undo()`: The function is invalid in current mode."));if(E<C.length-1){for(var g=E+1;null==C[g];)++g;N(E,g,function(){return a()})}})};a.getStepCount=function(){return K?C.length:NaN};a.getCurStep=function(){return K?E:NaN};a.setCurStep=function(a){return new Promise(function(f,
g){if(1>arguments.length||isNaN(a))return g(Error("`setCurStep(index)`: The parameter `index` is invalid."));a=Math.round(a);if(0>a||a>=C.length||null==C[a])return g(Error("`setCurStep(index)`: The parameter `index` is invalid."));N(E,a,function(){return f()})})};h.needAlwaysTrueTransform=!1;var N=function(a,p,g){E=p;p=C[a].crop;var e=C[E].crop;p.left==e.left&&p.top==e.top&&p.width==e.width&&p.bottom==e.bottom&&C[a].srcBlob==C[E].srcBlob?(f(m).setTransform(C[E].transform.dot(C[a].transform.inversion()).dot(f(m).getTransform())),
T.setImgStyleFit(),g&&g()):oa(h.needAlwaysTrueTransform,!1,g)},ha=function(h){f(m).siblings().hide();oa(!1,!1,function(){a.isAutoShowCropUI&&p.showCropRect();h&&h()})},ca;ca=Math.min(screen.width,screen.height)*(window.devicePixelRatio||1);var oa=h.updateCvsAsync=function(a,h,g){f(m).hide();var e=C[E],k=e.srcBlob||r[y].kPainterOriBlob,n=function(){var f=URL.createObjectURL(k),n=new Image;n.onload=n.onerror=function(){n.onload=n.onerror=null;X(n,e,a,h);URL.revokeObjectURL(f);g&&g()};n.src=f};window.createImageBitmap?
createImageBitmap(k).then(function(f){X(f,e,a,h);g&&g()})["catch"](function(){n()}):n()},X=function(h,p,g,e){a._noAnyUseButForIosSafariBug0=h.naturalWidth;a._noAnyUseButForIosSafariBug1=h.naturalHeight;var k=h.naturalWidth||h.width,n=h.naturalHeight||h.height,v=p.crop;p=p.transform;var l=m.getContext("2d"),z=m.fullQualityWidth=Math.round(k*v.width)||1,r=m.fullQualityHeight=Math.round(n*v.height)||1,x=!1;0!=p.a*p.d&&0==p.b*p.c?(m.fullQualityWidth=z,m.fullQualityHeight=r):(m.fullQualityWidth=r,m.fullQualityHeight=
z,g&&(x=!0));m.hasCompressed=!1;if(g){var L,t;x?(L=r,t=z):(L=z,t=r);m.width=L;m.height=t;l.setTransform(p.a,p.b,p.c,p.d,L/2*(1-p.a-p.c),t/2*(1-p.b-p.d))}else z>ca||r>ca?(L=ca/Math.max(z,r),m.width=Math.round(z*L)||1,m.height=Math.round(r*L)||1,m.hasCompressed=!0):(m.width=z,m.height=r);L=Math.round(k*v.left);v=Math.round(n*v.top);L==k&&--L;v==n&&--v;x?(k=m.height,n=m.width):(k=m.width,n=m.height);if(2>=z/k)l.drawImage(h,L,v,z,r,0,0,k,n);else{x=document.createElement("canvas");x.width=Math.round(z/
2);x.height=Math.round(r/2);t=x.getContext("2d");var S=Math.round(z/2),d=Math.round(r/2);for(t.drawImage(h,L,v,z,r,0,0,S,d);;){h=S;z=d;S=Math.round(h/2);d=Math.round(z/2);if(S<=k||d<=n)break;t.drawImage(x,0,0,h,z,0,0,S,d)}l.drawImage(x,0,0,h,z,0,0,k,n)}g?f(m).setTransform(new kUtil.Matrix(1,0,0,1,0,0)):f(m).setTransform(p);e||(T.setImgStyleFit(),f(m).show())};a.enterEdit=function(){return new Promise(function(a,f){if(K)return f(Error("`enterEdit()`: The function is invalid in current mode."));if(-1==
y)return f(Error("`enterEdit()`: There is no image in the instance."));Z="";w();K=!0;var g=r[y].kPainterProcess||{crop:{left:0,top:0,width:1,height:1},transform:new kUtil.Matrix(1,0,0,1,0,0),srcBlob:null,saveFormat:null};C.push(g);E=0;ha(function(){G();J=F=null;Z="basicEdit";return a()})})};var Y=a.cancelEdit=function(){if(!K)return!1;K=!1;C.length=0;D.length=0;U.showImg(y);f(m).hide();p.hideCropRect();ka.hideFreeTransformBorderDirectly();J=F=null;Z="view";return!0},O=function(a,h){var g=C[E].crop,
e=C[E].transform,k=C[0].crop,n=C[0].transform,v=r[y];if(C[E].srcBlob||n.a!=e.a||n.b!=e.b||n.c!=e.c||n.d!=e.d||Math.round(v.kPainterOriWidth*g.left)!=Math.round(v.kPainterOriWidth*k.left)||Math.round(v.kPainterOriHeight*g.top)!=Math.round(v.kPainterOriHeight*k.top)||Math.round(v.kPainterOriWidth*(g.left+g.width))!=Math.round(v.kPainterOriWidth*(k.left+k.width))||Math.round(v.kPainterOriHeight*(g.top+g.height))!=Math.round(v.kPainterOriHeight*(k.top+k.height))){URL.revokeObjectURL(v.src);var l=new Image,
g=function(){l.onload=l.onerror=function(){l.onload=l.onerror=null;h?(f(r[y]).remove(),r.splice(y,1,l)):r.splice(++y,0,l);A.children(".kPainterImgsDiv").append(l);a&&a()};t(m,C[E].saveFormat||v.kPainterSaveFormat).then(function(a){l.kPainterBlob=a;l.kPainterWidth=m.width;l.kPainterHeight=m.height;C[E].srcBlob?(l.kPainterOriBlob=a,l.kPainterOriWidth=m.width,l.kPainterOriHeight=m.height,l.kPainterSaveFormat=C[E].saveFormat):(l.kPainterOriBlob=v.kPainterOriBlob,l.kPainterOriWidth=v.kPainterOriWidth,
l.kPainterOriHeight=v.kPainterOriHeight,l.kPainterProcess=C[E],l.kPainterSaveFormat=v.kPainterSaveFormat);a=URL.createObjectURL(a);l.src=a})};m.hasCompressed||1!=e.a||0!=e.b||0!=e.c||1!=e.d||0!=e.e||0!=e.f?(f(m).hide(),oa(!0,!0,g)):g()}else a()},P=!1;a.saveEdit=function(h){return new Promise(function(m,g){if(!K||P)return g(Error("`saveEdit(isCover)`: The function is invalid in current mode."));Z="";P=!0;w();setTimeout(function(){O(function(){Y();G();P=!1;J=F=null;try{(function(){for(var e=0;e<U.thumbnailBoxArr.length;++e){var g=
U.thumbnailBoxArr[e],n=r[y];a._noAnyUseButForIosSafariBug0=n.naturalWidth;a._noAnyUseButForIosSafariBug1=n.naturalHeight;var m=Math.min(g.kPainterMaxWH/n.naturalWidth,g.kPainterMaxWH/n.naturalHeight,1),l;h?(l=f(g.kPainterThumbBoxArr[y]),l=l.hasClass("kPainterThumbnailCanvas")?l[0]:l.find(".kPainterThumbnailCanvas")[0]):(l=document.createElement("canvas"),l.className="kPainterThumbnailCanvas");l.width=Math.round(n.naturalWidth*m);l.height=Math.round(n.naturalHeight*m);l.getContext("2d").drawImage(n,
0,0,l.width,l.height);if(!h){n=g.kPainterFunWrap;m=null;try{m=n?n(l):l}catch(z){return setTimeout(function(){throw z;},0),!1}m&&(m.getKPainterIndex=function(){return g.kPainterThumbBoxArr.indexOf(this)},g.kPainterThumbBoxArr.splice(y,0,m),f(g.kPainterThumbBoxArr[y-1]).after(m))}}})()}catch(e){setTimeout(function(){throw e;},0)}Z="view";return m()},h)},100)})};a.rotateRight=function(){if(!K)return!1;var a=f(m).getTransform(),a=kUtil.Matrix.dot(new kUtil.Matrix(0,1,-1,0,0,0),a);f(m).setTransform(a);
R({transform:a});a=m.fullQualityWidth;m.fullQualityWidth=m.fullQualityHeight;m.fullQualityHeight=a;T.setImgStyleFit();return!0};a.rotateLeft=function(){if(!K)return!1;var a=f(m).getTransform(),a=kUtil.Matrix.dot(new kUtil.Matrix(0,-1,1,0,0,0),a);f(m).setTransform(a);R({transform:a});a=m.fullQualityWidth;m.fullQualityWidth=m.fullQualityHeight;m.fullQualityHeight=a;T.setImgStyleFit();return!0};a.mirror=function(){if(!K)return!1;var a=f(m).getTransform(),a=kUtil.Matrix.dot(new kUtil.Matrix(-1,0,0,1,
0,0),a);f(m).setTransform(a);R({transform:a});T.setImgStyleFit();return!0};a.flip=function(){if(!K)return!1;var a=f(m).getTransform(),a=kUtil.Matrix.dot(new kUtil.Matrix(1,0,0,-1,0,0),a);f(m).setTransform(a);R({transform:a});T.setImgStyleFit();return!0};a.resize=function(a,f){return new Promise(function(g,e){if(!K)return e(Error("`resize`: The function is invaild in this mode."));a=parseInt(a);f=parseInt(f);if(a!==a||1>a)return e(Error("`resize`: The parameter `newWidth` is invaild."));if(f!==f||
1>f)return e(Error("`resize`: The parameter `newHeight` is invaild."));w();h.updateCvsAsync(!0,!0,function(){h.needAlwaysTrueTransform=!0;for(var e=a,n=f;2*e<m.width;)e*=2;for(;2*n<m.height;)n*=2;for(var v=m,l;;){l=document.createElement("canvas");l.width=e;l.height=n;l.getContext("2d").drawImage(v,0,0,e,n);var p=!1;a!=e&&(e/=2,p=!0);f!=n&&(n/=2,p=!0);if(!p)break}t(l).then(function(a){h.pushStack({srcBlob:a,saveFormat:"image/jpeg"});h.updateCvs(!1,!1,function(){h.needAlwaysTrueTransform=!1;G();return g()})})})})};
a.getEditWidth=function(){return K?m.fullQualityWidth:NaN};a.getEditHeight=function(){return K?m.fullQualityHeight:NaN}},p=new function(){var h=this;a.isAutoShowCropUI=!0;var p=A.children(".kPainterCroper");h.isCropRectShowing=!1;a.showCropRect=h.showCropRect=function(){K&&(h.isCropRectShowing=!0,L(),p.show())};a.hideCropRect=h.hideCropRect=function(){h.isCropRectShowing=!1;p.hide()};p.css({"border-left-width":"100000px","border-top-width":"100000px","border-right-width":"100000px","border-bottom-width":"100000px",
left:"-100000px",top:"-100000px",right:"-100000px",bottom:"-100000px"});a.setCropRectStyle=function(a){switch(parseInt(a)){case 0:return p.find(">.kPainterBigMover").hide(),p.find(">.kPainterMover").show(),!0;case 1:return p.find(">.kPainterMover").hide(),p.find(">.kPainterBigMover").show(),!0;default:return!1}};var r,t,w,y,D,G,T,U,X,Y,O,P,M,x,g,e,k,n,v,l;a.cropRectMinW=50;a.cropRectMinH=50;var z=function(){"crop"==J&&(J=F=null)},ia=function(){G=A.contentBoxRect();var a=f(m).getTransform(),d=parseFloat(m.style.left)+
1E5,h=parseFloat(m.style.top)+1E5;0!=a.a*a.d&&0==a.b*a.c?(O=parseFloat(m.style.width),P=parseFloat(m.style.height)):(O=parseFloat(m.style.height),P=parseFloat(m.style.width));var a=O/2,z=P/2;T=d-a;U=h-z;X=d+a;Y=h+z;g=parseFloat(p[0].style.width);e=parseFloat(p[0].style.height);M=parseFloat(p[0].style.left)-g/2+1E5;x=parseFloat(p[0].style.top)-e/2+1E5;k=Math.max(-G.width/2,T);n=Math.max(-G.height/2,U);v=Math.min(G.width/2,X);l=Math.min(G.height/2,Y)};A.find("> .kPainterCroper > .kPainterEdges > div, > .kPainterCroper > .kPainterCorners > div, > .kPainterCroper > .kPainterMover, > .kPainterCroper > .kPainterBigMover").on("touchstart touchcancel touchend mousedown",
function(a){a.preventDefault();var d=a.originalEvent.targetTouches;if(!d){if(!F)F="mouse";else if("mouse"!=F)return;d=[{pageX:a.originalEvent.clientX,pageY:a.originalEvent.clientY}]}else if(d.length)if(!F)F="touch";else if("touch"!=F)return;1==d.length?null==J&&(J="crop",w=d[0].identifier,r=d[0].pageX,t=d[0].pageY,a=f(this).attr("data-orient").split(","),y=a[0],D=a[1],ia()):0==d.length&&z()});A.on("mouseup",function(){"mouse"==F&&z()});A.on("mouseleave",function(a){"mouse"==F&&a.originalEvent.buttons&&
z()});a.onCropRectChange=null;var la=function(){p[0].style.left=M+g/2-1E5+"px";p[0].style.right=-M-g/2-1E5+"px";p[0].style.top=x+e/2-1E5+"px";p[0].style.bottom=-x-e/2-1E5+"px";p[0].style.width=g+"px";p[0].style.height=e+"px";N(a.onCropRectChange)};A.on("touchmove mousemove",function(f){f.preventDefault();var d=f.originalEvent.targetTouches;if(!d){if("mouse"!=F)return;d=[{pageX:f.originalEvent.clientX,pageY:f.originalEvent.clientY}]}else if("touch"!=F)return;if(1==d.length&&"crop"==J&&w==d[0].identifier){var h=
r;f=t;r=d[0].pageX;t=d[0].pageY;d=r-h;f=t-f;-1==y?(g-d<a.cropRectMinW&&(d=g-a.cropRectMinW),M+d<k&&(d=k-M),g-=d,M+=d):1==y&&(g+d<a.cropRectMinW&&(d=-g+a.cropRectMinW),M+g+d>v&&(d=v-g-M),g+=d);-1==D?(e-f<a.cropRectMinH&&(f=e-a.cropRectMinH),x+f<n&&(f=n-x),e-=f,x+=f):1==D&&(e+f<a.cropRectMinH&&(f=-e+a.cropRectMinH),x+e+f>l&&(f=l-e-x),e+=f);0==y&&0==D&&(M+d<k?d=k-M:M+g+d>v&&(d=v-g-M),x+f<n?f=n-x:x+e+f>l&&(f=l-e-x),M+=d,x+=f);la()}});var L=a.setCropRectArea=function(a,d,f,m){if(!h.isCropRectShowing)return!1;
-.5<=a||(a=-.5);-.5<=d||(d=-.5);.5>=f||(f=.5);.5>=m||(m=.5);a>f&&(a=f=(a+f)/2);d>m&&(d=m=(d+m)/2);ia();M=T+(a+.5)*O;M<k&&(M=k);x=U+(d+.5)*P;x<n&&(x=n);a=T+(f+.5)*O;a>v&&(a=v);g=a-M;m=U+(m+.5)*P;m>l&&(m=l);e=m-x;la();return!0},ma=a.getCropRectArea=function(a){if(!h.isCropRectShowing)return null;var d=f(m).getTransform();(0!=d.a*d.d&&0==d.b*d.c?parseFloat(m.style.width):parseFloat(m.style.height))!=O&&ia();var d=(M-T)/O-.5,k=(x-U)/P-.5,n=d+g/O,l=k+e/P;a&&(d=Math.round(d*m.fullQualityWidth*2)/2,k=Math.round(k*
m.fullQualityHeight*2)/2,n=Math.round(n*m.fullQualityWidth*2)/2,l=Math.round(l*m.fullQualityHeight*2)/2);return[d,k,n,l]};h.getNeededRect=function(){ia();var a={};a.width=2*Math.max(-M,M+g);a.height=2*Math.max(-x,x+e);return a};a.crop=function(a){return new Promise(function(d,e){if(!K)return e(Error("crop([ltrb])`: The function is invalid in this mode."));ia();a=a||ma();if(!a)return e(Error("crop([ltrb])`: No thing can be cropped."));var f=a[0],g=a[1],h=a[2],k=a[3];if(.5>(f+.5)*m.fullQualityWidth&&
.5>=(.5-h)*m.fullQualityWidth&&.5>(g+.5)*m.fullQualityHeight&&.5>=(.5-k)*m.fullQualityHeight)return d([f,g,h,k]);H.pushStack({crop:{left:f+.5,top:g+.5,width:h-f,height:k-g}});H.updateCvsAsync(H.needAlwaysTrueTransform,!1,function(){return d([f,g,h,k])})})}},ka=new function(){var h=this;(function(){var r=Math.PI/180,y=Math.PI/6,D=Math.PI/18,B=function(a){var e=m.width,g=m.height,h;e>g?e>a&&(h=a/e,e=a,g=Math.round(g*h)||1):g>a&&(h=a/g,g=a,e=Math.round(e*h)||1);a=f(m).getTransform();var l;0!=a.a*a.d&&
0==a.b*a.c?(h=e,l=g):(h=g,l=e);var p=document.createElement("canvas");p.width=h;p.height=l;p=p.getContext("2d");p.setTransform(a.a,a.b,a.c,a.d,h/2*(1-a.a-a.c),l/2*(1-a.b-a.d));p.drawImage(m,0,0,e,g);return p.getImageData(0,0,h,l)},R=function(e,f,g){if("string"==typeof e||e instanceof String||e instanceof Blob)U.getBlobAndFormatFromAnyImgData(e,function(a){a?aa(a).then(function(a){R(a,f,g)}):g(null)});else if(e instanceof Image)try{a._noUseButTestSrc=e.src}catch(L){setTimeout(function(a){throw a;},
0);g(null);return}else if(e instanceof ImageData){if(e.width<=f&&e.height<=f){setTimeout(function(){g(e)},0);return}var h=e;e=document.createElement("canvas");e.width=h.width;e.height=h.height;e.getContext("2d").putImageData(h,e.width,e.height)}var k=document.createElement("canvas"),h=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height,m=1;h>n?h>f&&(m=f/h,h=f,n=Math.round(n*m)||1):n>f&&(m=f/n,n=f,h=Math.round(h*m)||1);k.width=h;k.height=n;var p=k.getContext("2d");p.drawImage(e,
0,0,k.width,k.height);setTimeout(function(){g(p.getImageData(0,0,k.width,k.height))},0)};a.documentDetect=function(a){return new Promise(function(e,f){if(!a){if("perspect"!=J)return f(Error("`documentDetect`: The function is only valid in `freeTransform` mode."));w()}var g=KPainter._cv;R(a||B(256),256,function(f){var h=new g.matFromArray(f,g.CV_8UC4);f=h.cols;var k=h.rows,n=Math.min(h.cols,h.rows);g.cvtColor(h,h,g.ColorConversionCodes.COLOR_RGBA2GRAY.value,0);var l=new g.Mat;g.GaussianBlur(h,l,[5,
5],0,0,g.BORDER_DEFAULT);g.delMat(h);h=new g.Mat;g.Canny(l,h,8,.5*n,3,!1);g.delMat(l);var m=new g.Mat;g.HoughLinesP(h,m,1,r,8,8,3);g.delMat(h);for(var p=m.data32s(),d=[],h=f/2,v=k/2,l=0;l<p.length;l+=2)d.push(p[l]-h),d.push(p[l+1]-v);g.delMat(m);for(var t=[],l=0;l<d.length;l+=4){var m=d[l+0],x=d[l+1],w=d[l+2],E=d[l+3],C=x-E,A=w-m,p=m*E-w*x;if(0!=p){var B=0>p?-1:1,F=Math.sqrt(C*C+A*A),C=C/F*B,A=A/F*B,p=p/F*B,B=Math.atan(C/A),F=Math.abs(B);F>y&&F<Math.PI/2-y||(0>A?0==C?(A=-1,B=0):B=-B:0<A?0>C?B=-Math.PI-
B:0<C?B=Math.PI-B:(A=1,B=Math.PI):0<C?(C=1,B=Math.PI/2):(C=-1,B=-Math.PI/2),m=Math.sqrt((w-m)*(w-m)+(E-x)*(E-x)),t.push([C,A,p,B,m]))}}l=[];d=[];ga(t,l,2,D,.7*n);ga(l,d,2,D,.7*n);n=[null,null,null,null];for(l=0;l<d.length;++l)t=d[l],B=t[3],x=B<3*-Math.PI/4?0:B<-Math.PI/4?1:B<Math.PI/4?2:B<3*Math.PI/4?3:0,n[x]?(m=n[x],B=m[2],C=m[4],p=t[2],m=t[4],p*m>B*C&&(n[x]=t)):n[x]=t;for(l=0;l<n.length;++l)t=n[l],null==t&&(t=[],n[l]=t,0==l?(t[2]=v,t[3]=Math.PI):1==l?(t[2]=h,t[3]=-Math.PI/2):2==l?(t[2]=v,t[3]=0):
3==l&&(t[2]=h,t[3]=Math.PI/2)),t[0]=Math.sin(t[3]),t[1]=-Math.cos(t[3]);h=[];for(l=0;l<n.length;++l)d=n[l],m=n[(l-1+n.length)%n.length],v=d[0],p=d[1],d=d[2],t=m[0],x=m[1],B=m[2],m=(p*B-x*d)/(x*v-p*t),x=(v*B-t*d)/(t*p-v*x),h.push([m/f,x/k]);a||(oa(h),G());e(h)})})};var ga=function(a,f,g,h,l){for(var e=0;e<a.length;++e){for(var k=a[e],n=!1,m=0;m<f.length;++m){var p=f[m],r=p[3],d=k[3],v=r-d;v>Math.PI?d+=2*Math.PI:v<-Math.PI&&(d-=2*Math.PI);v=Math.abs(p[2]-k[2]);if(Math.abs(r-d)<h&&v<g){var n=!0,v=p[4],
t=k[4],m=v+t;p[2]=(p[2]*v+k[2]*t)/m;r=(r*v+d*t)/m;r>Math.PI?r-=2*Math.PI:r<=-Math.PI&&(r+=2*Math.PI);p[3]=r;p[4]=Math.min(m,l);break}}n||f.push([null,null,k[2],k[3],k[4]])}},ha=A.children(".kPainterPerspect");h.hideFreeTransformBorderDirectly=function(){ha.hide()};var ca=A.find("> .kPainterPerspect > .kPainterPerspectCvs")[0];a.onFreeTransformCornerPosChange=null;var oa=a.setFreeTransformCornerPos=function(a){if("perspect"==J){var e=m.kPainterZoom,g=f(m).getTransform(),h=m.width*e,e=m.height*e;if(0==
g.a*g.d||0!=g.b*g.c)g=h,h=e,e=g;for(var l=A.borderBoxRect(),g=l.width/2-5,l=l.height/2-5,p=0;p<O.length;++p){var r=O[p],t=f(r).attr("data-index"),x=a[t],t=h*x[0],x=e*x[1];t<-g?t=-g:t>g&&(t=g);x<-l?x=-l:x>l&&(x=l);r.style.left=t+"px";r.style.right=-t+"px";r.style.top=x+"px";r.style.bottom=-x+"px"}Y();ha.show()}},X=a.getFreeTransformCornerPos=function(){var a=m.kPainterZoom,g=f(m).getTransform(),h=m.width*a,a=m.height*a;if(0==g.a*g.d||0!=g.b*g.c)g=h,h=a,a=g;for(var g=[],p=0;p<O.length;++p){var l=O[p];
g.push([parseFloat(l.style.left)/h,parseFloat(l.style.top)/a])}return g},Y=function(){var e=A.borderBoxRect();ca.width=Math.round(e.width);ca.height=Math.round(e.height);for(var g=[],f=0;f<O.length;++f)g.push([Math.round(parseFloat(O[f].style.left)+e.width/2),Math.round(parseFloat(O[f].style.top)+e.height/2)]);for(var e=ca.getContext("2d"),h=Number.POSITIVE_INFINITY,l,f=0;4>f;++f){var m=g[f][0]*g[f][0]+g[f][1]*g[f][1];m<h&&(h=m,l=f)}for(var p=[],f=0;4>f;++f)p.push([g[(l+f)%4][0],g[(l+f)%4][1]]);e.fillStyle=
"rgba(0,0,0,0.3)";e.beginPath();e.moveTo(0,0);e.lineTo(p[0][0],p[0][1]);l=function(a,e,g,f,d,h,k,l){return[Math.sign((f-e)*d+(a-g)*h+g*e-a*f),Math.sign((f-e)*k+(a-g)*l+g*e-a*f)]};g=[];for(f=0;4>f;++f)g.push(l(p[f][0],p[f][1],p[(f+1)%4][0],p[(f+1)%4][1],p[(f+2)%4][0],p[(f+2)%4][1],p[(f+3)%4][0],p[(f+3)%4][1]));f=function(a,e,g,f,d,h,k,l){var m=f-e,n=a-g;a=g*e-a*f;e=l-h;g=d-k;d=k*h-d*l;h=n*e-g*m;return[(a*g-d*n)/h,(d*m-a*e)/h]};l=void 0;h=function(){var a,e,g=p[1][0]-p[0][0];g&&(a=(p[1][1]-p[0][1])/
g);var f=p[3][0]-p[0][0];f&&(e=(p[3][1]-p[0][1])/f);return 0<g?0<f?a<=e:!0:0==g?0<f?!1:!0:0<=f?!1:a<=e}();0>g[0][0]*g[0][1]?0>g[2][0]*g[2][1]&&(l=f(p[0][0],p[0][1],p[1][0],p[1][1],p[2][0],p[2][1],p[3][0],p[3][1]),h?(e.lineTo(l[0],l[1]),e.lineTo(p[2][0],p[2][1]),e.lineTo(p[1][0],p[1][1]),e.lineTo(l[0],l[1]),e.lineTo(p[3][0],p[3][1])):(e.lineTo(p[3][0],p[3][1]),e.lineTo(l[0],l[1]),e.lineTo(p[1][0],p[1][1]),e.lineTo(p[2][0],p[2][1]),e.lineTo(l[0],l[1]))):0>g[1][0]*g[1][1]&&0>g[3][0]*g[3][1]&&(l=f(p[1][0],
p[1][1],p[2][0],p[2][1],p[3][0],p[3][1],p[0][0],p[0][1]),h?(e.lineTo(p[1][0],p[1][1]),e.lineTo(l[0],l[1]),e.lineTo(p[3][0],p[3][1]),e.lineTo(p[2][0],p[2][1]),e.lineTo(l[0],l[1])):(e.lineTo(l[0],l[1]),e.lineTo(p[2][0],p[2][1]),e.lineTo(p[3][0],p[3][1]),e.lineTo(l[0],l[1]),e.lineTo(p[1][0],p[1][1])));l||(h?(e.lineTo(p[1][0],p[1][1]),e.lineTo(p[2][0],p[2][1]),e.lineTo(p[3][0],p[3][1])):(e.lineTo(p[3][0],p[3][1]),e.lineTo(p[2][0],p[2][1]),e.lineTo(p[1][0],p[1][1])));e.lineTo(p[0][0],p[0][1]);e.lineTo(0,
0);e.lineTo(0,ca.height);e.lineTo(ca.width,ca.height);e.lineTo(ca.width,0);e.lineTo(0,0);e.fill();N(a.onFreeTransformCornerPosChange)},O=A.find("> .kPainterPerspect > .kPainterPerspectCorner");O.css("left","0");O.css("top","0");O.css("right","0");O.css("bottom","0");var P=null,M,x,g;O.on("touchstart touchcancel touchend mousedown",function(a){g=this;a.preventDefault();var e=a.originalEvent.targetTouches;if(!e){if(!F)F="mouse";else if("mouse"!=F)return;e=[{pageX:a.originalEvent.clientX,pageY:a.originalEvent.clientY}]}else if(e.length)if(!F)F=
"touch";else if("touch"!=F)return;a=function(){var a=ha.width()/2-5,e=ha.height()/2-5,f=parseFloat(g.style.left),h=parseFloat(g.style.top),k=!0,m=!0;f<-a?f=-a:f>a?f=a:k=!1;h<-e?h=-e:h>e?h=e:m=!1;k&&(g.style.left=f+"px",g.style.right=-f+"px");m&&(g.style.top=h+"px",g.style.bottom=-h+"px");(k||m)&&Y()};1==e.length?("perspect"==J&&(J="perspectCornerMoving"),a(),P=e[0].identifier,M=e[0].pageX,x=e[0].pageY):0==e.length&&"perspectCornerMoving"==J&&(a(),F=null,J="perspect")});A.on("touchmove mousemove",
function(a){a.preventDefault();var e=a.originalEvent.targetTouches;if(!e){if("mouse"!=F)return;e=[{pageX:a.originalEvent.clientX,pageY:a.originalEvent.clientY}]}else if("touch"!=F)return;if(1==e.length&&"perspectCornerMoving"==J&&P==e[0].identifier){var f=M;a=x;M=e[0].pageX;x=e[0].pageY;e=M-f;a=x-a;e=parseFloat(g.style.left)+e;a=parseFloat(g.style.top)+a;g.style.left=e+"px";g.style.right=-e+"px";g.style.top=a+"px";g.style.bottom=-a+"px";Y()}});A.on("mouseup",function(){"mouse"==F&&"perspectCornerMoving"==
J&&(F=null,J="perspect")});A.on("mouseleave",function(a){"mouse"==F&&a.originalEvent.buttons&&"perspectCornerMoving"==J&&(F=null,J="perspect")});a.freeTransformMaxWH=2048;a.freeTransform=function(e,f,g){return new Promise(function(e,h){if(!g&&"perspect"!=J)return h(Error("`freeTransform`: The function is only valid in `freeTransform` mode."));w();var k=KPainter._cv,l=f=f||X();.005>Math.abs(l[0][0]-.5)&&.005>Math.abs(l[0][1]-.5)&&.005>Math.abs(l[1][0]+.5)&&.005>Math.abs(l[1][1]-.5)&&.005>Math.abs(l[2][0]+
.5)&&.005>Math.abs(l[2][1]+.5)&&.005>Math.abs(l[3][0]-.5)&&.005>Math.abs(l[3][1]+.5)?(G(),g?e(null):e()):R(g||B(a.freeTransformMaxWH),a.freeTransformMaxWH,function(a){a=new k.matFromArray(a,k.CV_8UC4);k.cvtColor(a,a,k.ColorConversionCodes.COLOR_RGBA2RGB.value,0);for(var h=new k.Mat.zeros(4,1,k.CV_32FC2),l=h.data32f(),n=0;n<f.length;++n){var d=f[n];l[2*n]=Math.round((d[0]+.5)*a.cols);l[2*n+1]=Math.round((d[1]+.5)*a.rows)}var p=l[2]-l[0],r=l[3]-l[1],d=l[4]-l[2],n=l[5]-l[3],v=l[6]-l[4],x=l[7]-l[5],w=
l[0]-l[6],z=l[1]-l[7],l=Math.round(Math.max(Math.sqrt(p*p+r*r),Math.sqrt(v*v+x*x))),d=Math.round(Math.max(Math.sqrt(d*d+n*n),Math.sqrt(w*w+z*z))),w=new k.Mat.zeros(4,1,k.CV_32FC2),n=w.data32f();n[2]=l;n[4]=l;n[5]=d;n[7]=d;n=k.getPerspectiveTransform(h,w);k.delMat(h);k.delMat(w);h=new k.Mat.zeros(d,l,k.CV_8UC3);w=new k.Scalar(0,255,0);k.warpPerspective(a,h,n,[h.rows,h.cols],k.InterpolationFlags.INTER_LINEAR.value,k.BORDER_CONSTANT,w);k.delMat(a);k.delMat(n);k.delMat(w);a=new ImageData(l,d);w=h.channels();
p=h.data();for(r=n=0;n<p.length;n+=w,r+=4)a.data[r]=p[n],a.data[r+1]=p[n+1%w],a.data[r+2]=p[n+2%w],a.data[r+3]=255;k.delMat(h);m.width=l;m.height=d;m.getContext("2d").putImageData(a,0,0);T.setImgStyleFit();t(m,"image/jpeg").then(function(a){g?e(a):(H.pushStack({srcBlob:a,saveFormat:"image/jpeg"}),H.updateCvsAsync(!0,!1,function(){oa([[-.5,-.5],[.5,-.5],[.5,.5],[-.5,.5]]);J="perspect";G();e()}))})})})};a.enterFreeTransformMode=function(){return new Promise(function(a,f){if(!K)return f(Error("`enterFreeTransformMode`: The function is only valid in edit mode."));
if(!KPainter.cvHasLoaded)return f(Error("`enterFreeTransformMode`: You should call `KPainter.loadCvScript()` first before use this function."));Z="";F=null;J="perspect";w();setTimeout(function(){p.hideCropRect();H.updateCvsAsync(!0,!1,function(){oa([[-.5,-.5],[.5,-.5],[.5,.5],[-.5,.5]]);ha.show();G();H.needAlwaysTrueTransform=!0;Z="freeTransform";a()})},0)})};a.exitFreeTransformMode=function(){return new Promise(function(e,f){if("perspect"!=J)return f(Error("`exitFreeTransformMode`: It is not in `freeTransform` mode."));
Z="";ha.hide();H.updateCvsAsync(!1,!1,function(){a.isAutoShowCropUI&&p.showCropRect();J=F=null;H.needAlwaysTrueTransform=!1;Z="basicEdit";e()})})}})()};new function(){a.videoHtmlElement=f('<div class="kPainterVideoMdl" style="display:none;"><video class="kPainterVideo" webkit-playsinline="true"></video><select class="kPainterCameraSelect"></select><select class="kPainterResolutionSelect"><option class="kPainterGotResolutionOpt" value="got" selected></option><option data-width="3840" data-height="2160">ask 3840 x 2160</option><option data-width="1920" data-height="1080">ask 1920 x 1080</option><option data-width="1600" data-height="1200">ask 1600 x 1200</option><option data-width="1280" data-height="720">ask 1280 x 720</option><option data-width="800" data-height="600">ask 800 x 600</option><option data-width="640" data-height="480">ask 640 x 480</option><option data-width="640" data-height="360">ask 640 x 360</option></select><button class="kPainterBtnGrabVideo"><svg width="48" viewBox="0 0 2048 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1024 672q119 0 203.5 84.5t84.5 203.5-84.5 203.5-203.5 84.5-203.5-84.5-84.5-203.5 84.5-203.5 203.5-84.5zm704-416q106 0 181 75t75 181v896q0 106-75 181t-181 75h-1408q-106 0-181-75t-75-181v-896q0-106 75-181t181-75h224l51-136q19-49 69.5-84.5t103.5-35.5h512q53 0 103.5 35.5t69.5 84.5l51 136h224zm-704 1152q185 0 316.5-131.5t131.5-316.5-131.5-316.5-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5z"/></svg></button><button class="kPainterBtnCloseVideo"><svg width="48" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/></svg></button></div>')[0];
a.videoSettings={video:{facingMode:{ideal:"environment"}}};a.beforeAddImgFromGrabVideoBtn=null;a.afterAddImgFromGrabVideoBtn=null;a.grabVideo=null;a.hideVideo=null;a.showVideo=function(h){a.hideVideo&&a.hideVideo();var m=f(a.videoHtmlElement).find(".kPainterVideo")[0],p=f(a.videoHtmlElement).find(".kPainterCameraSelect")[0],r=f(a.videoHtmlElement).find(".kPainterResolutionSelect")[0],t=f(a.videoHtmlElement).find(".kPainterGotResolutionOpt")[0],w=f(a.videoHtmlElement).find(".kPainterBtnGrabVideo")[0],
y=f(a.videoHtmlElement).find(".kPainterBtnCloseVideo")[0],B=function(){return p?navigator.mediaDevices.enumerateDevices().then(function(a){var f=p.value;p.innerHTML="";for(var e=void 0,h=0;h<a.length;++h){var n=a[h];if("videoinput"==n.kind){var r=document.createElement("option");r.value=n.deviceId;r.innerText=n.label||"camera "+h;p.appendChild(r);f==n.deviceId&&(e=r)}}var l=p.childNodes;if(!e&&l.length)try{m.srcObject.getTracks().forEach(function(a){if("video"==a.kind)for(var f=0;f<l.length;++f){var g=
l[f];if(a.label==g.innerText)throw e=g,"found the using source";}})}catch(z){self.kConsoleLog&&self.kConsoleLog(z)}e&&(p.value=e.value)}):Promise.reject("no camera select")},A=function(){m.srcObject&&(self.kConsoleLog&&self.kConsoleLog("======stop video========"),m.srcObject.getTracks().forEach(function(a){a.stop()}))},D=function(x){return new Promise(function(g,e){A();self.kConsoleLog&&self.kConsoleLog("======before video========");var k=h?h:a.videoSettings,n=r?f(r).children(":selected")[0]:null;
if(n&&n.hasAttribute("data-width")){var v=n.getAttribute("data-width"),n=n.getAttribute("data-height");t.setAttribute("data-width",v);t.setAttribute("data-height",n);/Safari/.test(navigator.userAgent)&&/iPhone/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)?1280<=v?k.video.width=1280:640<=v?k.video.width=640:320<=v&&(k.video.width=320):(k.video.width={ideal:v},k.video.height={ideal:n});!x&&(v=f(p).children(":selected")[0])&&(x=v.value);x&&(k.video.facingMode=void 0,k.video.deviceId=
{exact:x})}var l=!1,w=function(){self.kConsoleLog&&self.kConsoleLog("======try getUserMedia========");self.kConsoleLog&&self.kConsoleLog("ask "+JSON.stringify(k.video.width)+"x"+JSON.stringify(k.video.height));navigator.mediaDevices.getUserMedia(k).then(function(a){self.kConsoleLog&&self.kConsoleLog("======get video========");return new Promise(function(e,f){m.srcObject=a;m.onloadedmetadata=function(){self.kConsoleLog&&self.kConsoleLog("======play video========");m.play().then(function(){self.kConsoleLog&&
self.kConsoleLog("======played video========");var a=m.videoWidth+"x"+m.videoHeight;t&&(t.innerText=a);r&&(r.value="got");self.kConsoleLog&&self.kConsoleLog(a);e()},function(a){f(a)})};m.onerror=function(){f()}})}).then(function(){g()})["catch"](function(a){self.kConsoleLog&&self.kConsoleLog(a);l?e(a):(l=!0,k.video.width=void 0,k.video.height=void 0,w())})};w()})},F=function(){D(p.value).then(function(){J&&A()})["catch"](function(a){alert("Play video failed: "+(a.message||a))})};p&&p.addEventListener("change",
F);var G=function(){D().then(function(){J&&A()})["catch"](function(a){alert("Play video failed: "+(a.message||a))})};r&&r.addEventListener("change",G);a.grabVideo=function(f){var g=document.createElement("canvas");g.width=m.videoWidth;g.height=m.videoHeight;g.getContext("2d").drawImage(m,0,0);return f?a.addImage(g):g};var H=function(){if(a.beforeAddImgFromGrabVideoBtn){var f=a.grabVideo();N(a.beforeAddImgFromGrabVideoBtn,[f,function(f){a.addImage(f).then(function(e){N(a.afterAddImgFromGrabVideoBtn,
[!0,e])},function(e){N(a.afterAddImgFromGrabVideoBtn,[!1,e])})}])}else a.grabVideo(!0).then(function(f){N(a.afterAddImgFromGrabVideoBtn,[!0,f])},function(f){N(a.afterAddImgFromGrabVideoBtn,[!1,f])});a.hideVideo()};if(w)f(w).on("click",H);var J=!1,K=function(){A();J=!0;t.removeAttribute("data-width");var h=a.videoHtmlElement.parentNode;h&&h.removeChild(a.videoHtmlElement);p&&p.removeEventListener("change",F);r&&r.removeEventListener("change",G);w&&f(w).off("click",H);y&&f(y).off("click",K);a.grabVideo=
null;a.hideVideo=null};a.hideVideo=K;if(y)f(y).on("click",K);document.body.appendChild(a.videoHtmlElement);return D().then(function(){if(J)return A(),Promise.reject("Video window has closed.");B()["catch"](function(a){self.kConsoleLog&&kConsoleLog(a)});f(a.videoHtmlElement).show();return Promise.resolve()})}}};KPainter.cvFolder=void 0==KPainter.cvFolder?"js":KPainter.cvFolder;KPainter.cvHasLoaded=!1;
KPainter._doCallbackNoBreak=function(h,a){if(h)try{h.apply(window,a||[])}catch(f){setTimeout(function(){throw f;},0)}};
KPainter.loadCvScript=function(){return new Promise(function(h,a){KPainter._loadCvQueue=KPainter._loadCvQueue||new TaskQueue;KPainter._loadCvQueue.push(function(){if(KPainter.cvHasLoaded)h(),KPainter._loadCvQueue.next();else{KPainter._CVModule={cvFolder:KPainter.cvFolder,preRun:[],postRun:[],isRuntimeInitialized:!1,onRuntimeInitialized:function(){KPainter.cvHasLoaded=!0;self.kConsoleLog&&kConsoleLog("Runtime is ready!");h();KPainter._loadCvQueue.next()},onExit:function(){a(Error("load wasm failed."));
KPainter._loadCvQueue.next()},onAbort:function(){a(Error("load wasm failed."));KPainter._loadCvQueue.next()},print:function(a){self.kConsoleLog&&kConsoleLog(a)},printErr:function(a){self.kConsoleLog&&kConsoleLog(a)},setStatus:function(a){self.kConsoleLog&&kConsoleLog(a)},totalDependencies:0};KPainter._CVModule.setStatus("Downloading...");var f=document.createElement("script"),t=KPainter.cvFolder;"/"!=t.charAt(t.length-1)&&(t+="/");f.src=window.WebAssembly?t+"cv-wasm.js?v=20180921":t+"cv.js?v=201800921";
f.onerror=function(){a(Error("load script failed."));KPainter._loadCvQueue.next()};document.body.appendChild(f)}})})};var MBC=KPainter;
